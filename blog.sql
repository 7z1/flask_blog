-- MySQL dump 10.13  Distrib 5.7.18, for macos10.12 (x86_64)
--
-- Host: localhost    Database: blog_site
-- ------------------------------------------------------
-- Server version	5.7.18-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `alembic_version`
--

DROP TABLE IF EXISTS `alembic_version`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `alembic_version` (
  `version_num` varchar(32) NOT NULL,
  PRIMARY KEY (`version_num`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `alembic_version`
--

LOCK TABLES `alembic_version` WRITE;
/*!40000 ALTER TABLE `alembic_version` DISABLE KEYS */;
INSERT INTO `alembic_version` VALUES ('e9ef002095cd');
/*!40000 ALTER TABLE `alembic_version` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_adminuser`
--

DROP TABLE IF EXISTS `info_adminuser`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_adminuser` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(256) NOT NULL,
  `description` varchar(256) NOT NULL,
  `keywords` varchar(256) NOT NULL,
  `email` varchar(64) NOT NULL,
  `wxid` varchar(64) NOT NULL,
  `wxcode` varchar(64) NOT NULL,
  `butoom_title` varchar(64) NOT NULL,
  `beian` varchar(64) NOT NULL,
  `about_me` text NOT NULL,
  `card_about` varchar(64) NOT NULL,
  `card_job` varchar(64) NOT NULL,
  `card_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `card_avatar` varchar(64) NOT NULL,
  `logo_image` varchar(64) NOT NULL,
  `logo_name` varchar(64) NOT NULL,
  `tags` varchar(256) NOT NULL,
  `qq` varchar(32) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_adminuser`
--

LOCK TABLES `info_adminuser` WRITE;
/*!40000 ALTER TABLE `info_adminuser` DISABLE KEYS */;
INSERT INTO `info_adminuser` VALUES ('2018-09-27 15:13:02','2018-10-02 16:49:59',1,'æ£‹å­ä¸ªäººåšå®¢ - ç å†œç›´ç”·ç™Œ - ä¸ªäººåšå®¢ç½‘ç«™','æ£‹å­ä¸ªäººåšå®¢ï¼Œç å†œç›´ç”·ç™Œï¼Œpython','ä¸ªäººåšå®¢,æ£‹å­ä¸ªäººåšå®¢,ä¸ªäººåšå®¢æ¨¡æ¿,7z1','krosy@china.com','De4thNote','http://blog.xiaosankexing.com/FgUTby20kFXE4F40ge0DeyEAMRsN','æ£‹å­ä¸ªäººåšå®¢','æš‚æ— å¤‡æ¡ˆ','<p style=\"text-align:center\">è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹ã€‚</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æµ‹è¯•æ•°æ®</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æœ¬ç«™ç‚¹åŸºäºFlaskå®ç°</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">å‰ç«¯ä»£ç æ˜¯ç™¾åº¦æ‰¾æ¥çš„åšå®¢æºç ï¼Œä¸‹è½½åœ°å€ï¼š</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">ä¸‹è½½åœ°å€å¿˜è®°äº†ï¼Œæ˜¯ä¸€ä¸ªå«æ¨é’çš„åšä¸»å†™çš„/[æ‰‹åŠ¨é»‘è„¸]</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">è‡ªè¡Œé›†æˆä»¥ä¸‹åŠŸèƒ½</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æ–‡ç« æ¨è ---- è®¾ç½®æ–‡ç« æ˜¯å¦é¦–é¡µæ¨èï¼Œbanneræ¨èï¼Œtopå›¾æ¨è</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æ–‡ç« ç®¡ç† ---- é€»è¾‘åˆ é™¤ï¼ŒçœŸå®åˆ é™¤ä¸æ¢å¤</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">ç•™è¨€ç®¡ç† --- é›†æˆç¬¬ä¸‰æ–¹ç•™è¨€æ’ä»¶åœ¨å‰ç«¯é¡µé¢ç•™è¨€ï¼Œåå°å›å¤æˆ–åˆ é™¤ç•™è¨€</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æ–°å¢æ–‡ç« ï¼Œç¼–è¾‘æ–‡ç«  ----- é‡‡ç”¨CkEditoræ–‡æœ¬ç¼–è¾‘æ’ä»¶ï¼Œæ–¹ä¾¿ä¸Šä¼ æ–‡ä»¶</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">å›æ”¶ç«™&nbsp; ----&nbsp; å¯¹é€»è¾‘åˆ é™¤çš„ç•™è¨€æˆ–è€…æ–‡ç« ï¼Œé‡‡å–è¿›ä¸€æ­¥æ“ä½œï¼Œæ¢å¤æˆ–åˆ é™¤</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">ç³»ç»Ÿç®¡ç† --- æ–°å¢ç®¡ç†å‘˜/è´¦å·ç®¡ç†/ä¿®æ”¹ç®¡ç†å‘˜è´¦å·å¯†ç </p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æŸ¥è¯¢æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€ï¼Œå†…å­˜CPUä½¿ç”¨é‡</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">æ•°æ®åº“å¤‡ä»½æ¢å¤ -----&nbsp; æ•°æ®å¯¼å‡º / å¯¼å…¥</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">ç¨‹åºåœ°å€ï¼š</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n\n<p style=\"text-align:center\">ç­‰æ‰€æœ‰åŠŸèƒ½å†™å®Œåœ¨ä¸Šä¼ å§</p>\n\n<p style=\"text-align:center\">&nbsp;</p>\n','ä¸€ä¸ª90åè‰æ ¹ç å†œï¼09å¹´å…¥è¡Œã€‚ä¸€ç›´æ½œå¿ƒç ”ç©¶webç½‘ç»œå®‰å…¨æŠ€æœ¯ï¼Œç›®å‰ä¸€è¾¹å·¥ä½œä¸€è¾¹ç§¯ç´¯ç»éªŒï¼Œè®°å½•ä¸€äº›ä¸ªäººç»éªŒã€‚','Pythonã€ç å†œã€ç›´ç”·ç™Œ','7z1 | æ£‹å­','http://blog.xiaosankexing.com/FkYTTlB4LR8g0RT2tq_xcpk5aRIy','','7z\'s Blog','çˆ¬è™«,Django,flask,Python,sec,ç°å¸½,webå®‰å…¨,æ•°æ®ç»Ÿè®¡,ä½›ç³»ç¨‹åºå‘˜,wooyun,æ¬ç –,apt,ä¸ªäººåšå®¢,webæ¸—é€,å†…ç½‘æ¸—é€,æ•°æ®åˆ†æ,ä¼ªé»‘é˜”,é»‘ç›’æµ‹è¯•,ç°ç›’æµ‹è¯•,å†…ç½‘aptæ”»å‡»','administrator@china.com');
/*!40000 ALTER TABLE `info_adminuser` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_category`
--

DROP TABLE IF EXISTS `info_category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_category` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_category`
--

LOCK TABLES `info_category` WRITE;
/*!40000 ALTER TABLE `info_category` DISABLE KEYS */;
INSERT INTO `info_category` VALUES ('2018-09-29 01:54:35','2018-10-03 19:45:09',1,'All'),('2018-09-29 01:56:51','2018-10-03 19:44:52',2,'Python'),('2018-09-29 01:57:08','2018-10-03 19:44:56',3,'Bug List'),('2018-10-03 19:44:29','2018-10-03 19:45:03',4,'Other');
/*!40000 ALTER TABLE `info_category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_comment`
--

DROP TABLE IF EXISTS `info_comment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_comment` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `news_id` int(11) NOT NULL,
  `content` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `parent_id` int(11) DEFAULT NULL,
  `like_count` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `news_id` (`news_id`),
  KEY `parent_id` (`parent_id`),
  CONSTRAINT `info_comment_ibfk_3` FOREIGN KEY (`news_id`) REFERENCES `info_news` (`id`) ON DELETE CASCADE,
  CONSTRAINT `info_comment_ibfk_4` FOREIGN KEY (`parent_id`) REFERENCES `info_comment` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_comment`
--

LOCK TABLES `info_comment` WRITE;
/*!40000 ALTER TABLE `info_comment` DISABLE KEYS */;
INSERT INTO `info_comment` VALUES ('2018-09-30 10:49:54','2018-09-30 10:49:54',1,7,'1111',NULL,0),('2018-09-30 10:49:57','2018-09-30 10:50:17',2,7,'111',NULL,0),('2018-09-30 10:50:01','2018-09-30 10:50:01',3,7,'111',2,0),('2018-09-30 10:50:02','2018-09-30 10:50:02',4,7,'111',2,0),('2018-09-30 10:50:12','2018-09-30 10:50:12',5,7,'111',2,0),('2018-09-30 10:50:21','2018-09-30 10:50:21',6,7,'333',1,0),('2018-10-02 00:30:13','2018-10-02 00:30:13',7,7,'111',NULL,0),('2018-10-02 00:30:16','2018-10-02 00:30:16',8,7,'333',7,0),('2018-10-02 00:30:27','2018-10-02 00:30:27',9,7,'123',NULL,0),('2018-10-02 00:30:32','2018-10-02 00:30:32',10,7,'456',9,0),('2018-10-02 00:34:43','2018-10-02 00:34:43',11,7,'1111',NULL,0),('2018-10-02 00:34:51','2018-10-02 00:34:51',12,7,'1234',11,0),('2018-10-02 00:36:53','2018-10-02 00:36:53',13,7,'3333',NULL,0),('2018-10-02 00:36:56','2018-10-02 00:36:56',14,7,'123',13,0),('2018-10-02 00:37:54','2018-10-02 00:37:54',15,7,'333',NULL,0),('2018-10-02 00:37:57','2018-10-02 00:38:51',16,7,'444',15,1),('2018-10-03 01:30:48','2018-10-03 01:30:48',17,11,'æ–‡ç« è¯„è®ºemojiæµ‹è¯•ğŸ‘¿ğŸ‘',NULL,0),('2018-10-03 16:17:06','2018-10-03 16:17:06',18,11,'xssæµ‹è¯•<script>alert(\'ceshi\')</script>',NULL,0);
/*!40000 ALTER TABLE `info_comment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_gbook`
--

DROP TABLE IF EXISTS `info_gbook`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_gbook` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ip` varchar(32) CHARACTER SET utf8 DEFAULT NULL,
  `email` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `content` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `replyName` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `son_id` int(11) DEFAULT NULL,
  `beReplyName` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `browser` varchar(16) CHARACTER SET utf8 DEFAULT NULL,
  `os_name` varchar(16) CHARACTER SET utf8 DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `son_id` (`son_id`),
  CONSTRAINT `info_gbook_ibfk_1` FOREIGN KEY (`son_id`) REFERENCES `info_gbook` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=70 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_gbook`
--

LOCK TABLES `info_gbook` WRITE;
/*!40000 ALTER TABLE `info_gbook` DISABLE KEYS */;
INSERT INTO `info_gbook` VALUES ('2018-09-30 19:07:07','2018-09-30 19:07:12',1,NULL,NULL,'æµ‹è¯•ç•™è¨€','æµ‹è¯•è€…',NULL,'',NULL,NULL),('2018-09-30 19:07:34','2018-09-30 19:07:41',2,NULL,NULL,'æµ‹è¯•ç•™è¨€2',NULL,NULL,NULL,NULL,NULL),('2018-09-30 19:08:00','2018-09-30 19:08:05',3,NULL,NULL,'33333',NULL,NULL,NULL,NULL,NULL),('2018-09-30 23:44:30','2018-09-30 23:44:35',4,NULL,NULL,'44444','å¸…å¤§å”',NULL,'',NULL,NULL),('2018-10-01 01:31:08','2018-10-01 01:31:08',5,NULL,NULL,'dddd','åŒ¿å',NULL,'',NULL,NULL),('2018-10-01 01:35:44','2018-10-01 01:35:44',6,NULL,NULL,'dddd','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 01:56:29','2018-10-01 01:56:29',7,NULL,NULL,'dasda1111','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 02:20:17','2018-10-01 02:20:17',8,NULL,'krosy@qq.com','æµ‹è¯•ç•™è¨€','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 02:20:58','2018-10-01 02:20:58',9,NULL,NULL,'å¯¹å¯¹å¯¹','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 02:23:39','2018-10-01 02:23:39',10,NULL,NULL,'222','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 02:24:18','2018-10-01 02:24:18',11,NULL,NULL,'1212121','æµ‹è¯•',NULL,NULL,NULL,NULL),('2018-10-01 02:25:30','2018-10-01 02:25:30',12,NULL,NULL,'æµ‹è¯•æ•°æ®','ç•™è¨€æµ‹è¯•',NULL,NULL,NULL,NULL),('2018-10-01 02:25:47','2018-10-01 02:25:47',13,NULL,NULL,'å‘µå‘µ','å“ˆå“ˆ',NULL,NULL,NULL,NULL),('2018-10-01 02:28:16','2018-10-01 02:28:16',14,NULL,NULL,'321','123',NULL,NULL,NULL,NULL),('2018-10-01 02:29:28','2018-10-01 02:29:28',15,NULL,NULL,'å“ˆå“ˆï¼Ÿ','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 02:30:01','2018-10-01 02:30:01',16,NULL,NULL,'æµ‹è¯•æµ‹è¯•','åŒ¿å',NULL,NULL,NULL,NULL),('2018-10-01 04:02:54','2018-10-01 04:02:54',25,'127.0.0.1',NULL,'åˆ é™¤å›å¤æµ‹è¯•','æµ‹è¯•',NULL,NULL,NULL,NULL),('2018-10-01 04:03:05','2018-10-01 04:03:05',26,'127.0.0.1',NULL,'åˆ é™¤å›å¤æµ‹è¯•','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,NULL,NULL),('2018-10-01 04:03:15','2018-10-01 04:03:15',27,'127.0.0.1',NULL,'æµ‹è¯•ç•™è¨€','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,NULL,NULL),('2018-10-01 04:04:26','2018-10-01 04:04:26',28,'127.0.0.1',NULL,'æµ‹è¯•æ•°æ®','test',NULL,NULL,NULL,NULL),('2018-10-01 04:05:42','2018-10-01 04:20:23',29,'127.0.0.1',NULL,'cdsacasdas','test',NULL,NULL,NULL,NULL),('2018-10-01 04:06:01','2018-10-01 04:06:01',30,NULL,NULL,'å›å¤æµ‹è¯•','admin',NULL,'test',NULL,NULL),('2018-10-02 00:55:29','2018-10-02 00:55:29',31,'127.0.0.1',NULL,'ddd','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,NULL,NULL),('2018-10-02 00:55:58','2018-10-02 00:55:58',32,'127.0.0.1',NULL,'ddd','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,NULL,NULL),('2018-10-02 00:57:47','2018-10-02 01:30:30',33,'127.0.0.1',NULL,'ddd','çƒ­å¿ƒç½‘æ°‘',41,NULL,NULL,NULL),('2018-10-02 01:15:22','2018-10-02 01:15:22',34,'127.0.0.1',NULL,'ceshi','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:18:56','2018-10-02 01:18:56',35,'127.0.0.1',NULL,'æµè§ˆå™¨æµ‹è¯•','çƒ­å¿ƒç½‘æ°‘',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:20:44','2018-10-02 01:20:44',36,'127.0.0.1','krosy@qq.com','11111','a4demon',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:20:54','2018-10-02 01:20:54',37,'127.0.0.1','krosy@qq.com','11111','a4demon',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:22:37','2018-10-02 01:22:37',38,'127.0.0.1','krosy@qq.com','3333','18888888888',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:23:47','2018-10-02 01:23:47',39,'127.0.0.1','krosy@qq.com','dsds','test',NULL,NULL,'Chrome','OS X'),('2018-10-02 01:25:55','2018-10-02 01:35:34',40,'127.0.0.1','krosy@qq.com','323232','ğŸ‘¿',42,NULL,'Chrome','OS X'),('2018-10-02 01:30:30','2018-10-02 01:30:30',41,NULL,NULL,'å›å¤æµ‹è¯•','admin',NULL,'çƒ­å¿ƒç½‘æ°‘',NULL,NULL),('2018-10-02 01:35:34','2018-10-02 01:35:34',42,NULL,NULL,'å›å¤æµ‹è¯•','ğŸ‘¿',NULL,'ğŸ‘¿',NULL,NULL),('2018-10-03 01:29:51','2018-10-03 01:29:51',43,'127.0.0.1','krosy@qq.com','ğŸ‘æµ‹è¯•emoji','ğŸ‘ğŸ‘ğŸ‘',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:21:35','2018-10-03 16:21:35',50,'127.0.0.1',NULL,'xssé˜²å¾¡æµ‹è¯•','(script>alert(\'test\')</script>',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:22:19','2018-10-03 16:22:19',51,'127.0.0.1',NULL,'å¯¹å¯¹å¯¹','(script>alert(\'test\')</script>',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:25:13','2018-10-03 16:25:13',52,'127.0.0.1',NULL,'ddd','(script>alert(\'test\')</script>',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:43:00','2018-10-03 16:43:00',55,'127.0.0.1',NULL,'xss(script)alert(\'test\')(/script)','(script)alert(\'test\')(/script)',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:44:58','2018-10-03 16:44:58',56,'127.0.0.1',NULL,'(script)alert(\'test\')(/script)','(script)alert(\'test\')(/script)',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:46:01','2018-10-03 16:46:01',57,'127.0.0.1',NULL,'(script)alert(\'test\')(/script)','(script)alert(\'test\')(/script)',NULL,NULL,'Chrome','OS X'),('2018-10-03 16:47:13','2018-10-03 16:47:13',58,'127.0.0.1',NULL,'(script)alert(\'test\')(/script)','(script)alert(\'test\')(/script)',NULL,NULL,'Chrome','OS X'),('2018-10-03 21:01:18','2018-10-03 21:01:18',59,'127.0.0.1',NULL,'(script)alert(\'test\')(/script)','(script)alert(\'test\')(/script)',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:16','2018-10-10 01:33:16',60,'127.0.0.1',NULL,'1','1',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:39','2018-10-10 01:33:39',61,'127.0.0.1',NULL,'2','2',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:45','2018-10-10 01:33:45',62,'127.0.0.1',NULL,'3','3',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:48','2018-10-10 01:33:48',63,'127.0.0.1',NULL,'4','4',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:50','2018-10-10 01:33:50',64,'127.0.0.1',NULL,'5','5',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:53','2018-10-10 01:33:53',65,'127.0.0.1',NULL,'6','6',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:57','2018-10-10 01:33:57',66,'127.0.0.1',NULL,'7','7',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:33:59','2018-10-10 01:33:59',67,'127.0.0.1',NULL,'8','8',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:34:02','2018-10-10 01:34:02',68,'127.0.0.1',NULL,'9','9',NULL,NULL,'Chrome','OS X'),('2018-10-10 01:34:07','2018-10-10 01:34:07',69,'127.0.0.1',NULL,'10','10',NULL,NULL,'Chrome','OS X');
/*!40000 ALTER TABLE `info_gbook` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_link`
--

DROP TABLE IF EXISTS `info_link`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_link` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) DEFAULT NULL,
  `url` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_link`
--

LOCK TABLES `info_link` WRITE;
/*!40000 ALTER TABLE `info_link` DISABLE KEYS */;
INSERT INTO `info_link` VALUES ('2018-10-06 03:36:00','2018-10-06 03:36:02',1,'y3\'s ä¸ªäººåšå®¢','http://www.yangyanying.xin/'),('2018-10-06 03:36:40','2018-10-06 03:36:46',2,'7z\'s ä¸ªäººåšå®¢','http://www.7z1.xyz/'),('2018-10-06 04:27:27','2018-10-06 04:46:48',3,'æ–°æµª','http://www.sina.com.cn/');
/*!40000 ALTER TABLE `info_link` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_news`
--

DROP TABLE IF EXISTS `info_news`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_news` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `source` varchar(64) CHARACTER SET utf8 NOT NULL,
  `digest` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `clicks` int(11) DEFAULT NULL,
  `index_image_url` varchar(256) CHARACTER SET utf8 DEFAULT NULL,
  `category_id` int(11) DEFAULT NULL,
  `status` int(11) DEFAULT NULL,
  `like_count` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `category_id` (`category_id`),
  CONSTRAINT `info_news_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `info_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_news`
--

LOCK TABLES `info_news` WRITE;
/*!40000 ALTER TABLE `info_news` DISABLE KEYS */;
INSERT INTO `info_news` VALUES ('2018-09-29 22:47:45','2018-10-02 00:29:45',4,'CKEditor æç¤ºå›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼Œä½†å´ä¸èƒ½é¢„è§ˆè§£å†³åŠæ³•ä¹‹ä¸€','æ£‹å­ã€‚','é—®é¢˜èµ·å› ï¼š  config.jsæ–‡ä»¶éƒ½é…ç½®å¥½äº†ï¼Œé¡µé¢ä¸Šä¹Ÿæ˜¾ç¤ºäº†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç‚¹å‡»å›¾ç‰‡ä¸Šä¼ ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæç¤ºä¸Šä¼ ä¹ŸæˆåŠŸäº†ï¼Œæœ¬åœ°æ–‡ä»¶å¤¹é‡Œä¹Ÿæ²¡æœ‰æœ‰å›¾ç‰‡ã€‚ä½†æ˜¯é¢„è§ˆå—å°±æ˜¯æ²¡æœ‰å›¾ç‰‡ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„é”™è¯¯æç¤ºå›¾ç‰‡ã€‚','<p><strong>é—®é¢˜èµ·å› ï¼š</strong></p>\n\n<p>config.jsæ–‡ä»¶éƒ½é…ç½®å¥½äº†ï¼Œé¡µé¢ä¸Šä¹Ÿæ˜¾ç¤ºäº†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç‚¹å‡»å›¾ç‰‡ä¸Šä¼ ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæç¤ºä¸Šä¼ ä¹ŸæˆåŠŸäº†ï¼Œæœ¬åœ°æ–‡ä»¶å¤¹é‡Œä¹Ÿæ²¡æœ‰æœ‰å›¾ç‰‡ã€‚ä½†æ˜¯é¢„è§ˆå—å°±æ˜¯æ²¡æœ‰å›¾ç‰‡ï¼Œåªæœ‰ä¸€ä¸ªçº¢è‰²çš„é”™è¯¯æç¤ºå›¾ç‰‡ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p><strong>è§£å†³æ€è·¯ï¼š</strong></p>\n\n<p>å„ç§ç™¾åº¦æŸ¥èµ„æ–™ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯è¯´æ–‡ä»¶é…ç½®é—®é¢˜ï¼Œä½†æ˜¯ï¼Œæˆ‘è¿™é‡Œä»¥å‰ä¹Ÿä½¿ç”¨è¿‡é…ç½®æ˜¯æ²¡é—®é¢˜çš„ã€‚æ‰€ä»¥æˆ‘å°±ä»å›¾ç‰‡è·¯å¾„ä¸Šæ‰¾é—®é¢˜ã€‚ä¸Šä¼ æ²¡é—®é¢˜ï¼Œå°±æ‰¾å›æ˜¾åˆ°é¢„è§ˆçš„è·¯å¾„ã€‚å‘ç°ï¼Œå¯Œæ–‡æœ¬ç¼–è¾‘å™¨é‡Œå·²ç»æœ‰äº†imgæ ‡ç­¾ï¼Œå›¾ç‰‡ä¹Ÿæ˜¯æœ¬åœ°çš„è·¯å¾„ã€‚ä½†æ˜¯æˆ‘æŠŠå›¾ç‰‡åœ°å€å¤åˆ¶åˆ°æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä¹Ÿæ˜¾ç¤ºä¸å‡ºæ¥ï¼Œåæ¥åœ¨pycharmä¸­æ‰“å°filepathï¼Œå‘ç°ä¸­é—´å°‘äº†ä¸ªæ–‡ä»¶å¤¹ï¼ŒåŸæ¥æ˜¯æˆ‘BASE_DIRè·¯å¾„æŒ‡å®šé”™äº†ï¼Œé‡æ–°æŒ‡å®šä¸Šä¼ è·¯å¾„ï¼Œå›¾ç‰‡å°±å‡ºæ¥äº†ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"/static/upload/201809292247348395.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p><strong>æœ€åæ€»ç»“ï¼š</strong></p>\n\n<p>å…¶å®å›¾ç‰‡é¢„è§ˆæ—¶ä¼šæ‹¿å½“å‰æ–‡ä»¶ä¹‹å‰çš„è·¯å¾„åŠ åˆ°å›¾ç‰‡è·¯å¾„ä¹‹å‰ï¼Œå¦‚æœè¿™ä¹‹å‰å¤šäº†ä¸ªæ–‡ä»¶å¤¹å°±ä¼šå¹²æ‰°å›¾ç‰‡çš„é¢„è§ˆï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å›¾ç‰‡ã€‚è®²çœŸï¼Œæˆ‘åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œä¸€ç›´åœ¨æ‰¾é…ç½®æ–‡ä»¶çš„é—®é¢˜ã€‚å¥½äº†ï¼Œé—®é¢˜è§£å†³äº†ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°é‡åˆ°è¿™é—®é¢˜çš„äººã€‚</p>\n',117,'http://blog.xiaosankexing.com/FrCOTng3iQEgcccbXzO6GBMa3u44',3,0,0),('2018-09-29 22:57:08','2018-10-02 17:27:35',5,'CKEditor 4.10.1 ä¸Šä¼ å›¾ç‰‡æç¤ºâ€œä¸æ­£ç¡®çš„æœåŠ¡å™¨å“åº”â€ é—®é¢˜è§£å†³','æ£‹å­ã€‚','æœ€è¿‘é¡¹ç›®é‡‡ç”¨CKEditor 4 å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸Šä¼ å›¾ç‰‡æ—¶æç¤º\"ä¸æ­£ç¡®çš„æœåŠ¡å™¨å“åº”\" , æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£è¦æ±‚è¿”å›jsonæ ¼å¼ï¼Œå®˜æ–¹ç¤ºä¾‹ï¼š','<p>æœ€è¿‘é¡¹ç›®é‡‡ç”¨CKEditor 4 å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸Šä¼ å›¾ç‰‡æ—¶æç¤º&quot;ä¸æ­£ç¡®çš„æœåŠ¡å™¨å“åº”&quot; , æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£è¦æ±‚è¿”å›jsonæ ¼å¼ï¼Œå®˜æ–¹ç¤ºä¾‹ï¼š</p>\n\n<p>Response: File Uploaded Successfully&nbsp;</p>\n\n<p>ä¸Šä¼ æˆåŠŸè¿”å›ï¼š</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;uploaded&quot;: 1,<br />\n&nbsp; &nbsp; &quot;fileName&quot;: &quot;foo.jpg&quot;,<br />\n&nbsp; &nbsp; &quot;url&quot;: &quot;/files/foo.jpg&quot;<br />\n}</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;uploaded&quot;: 1,<br />\n&nbsp; &nbsp; &quot;fileName&quot;: &quot;foo(2).jpg&quot;,<br />\n&nbsp; &nbsp; &quot;url&quot;: &quot;/files/foo(2).jpg&quot;,<br />\n&nbsp; &nbsp; &quot;error&quot;: {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;message&quot;: &quot;A file with the same name already exists. The uploaded file was renamed to \\&quot;foo(2).jpg\\&quot;.&quot;<br />\n&nbsp; &nbsp; }<br />\n}</p>\n\n<p>Response: File Could Not Be Uploaded</p>\n\n<p>ä¸Šä¼ å¤±è´¥è¿”å›ï¼š</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;uploaded&quot;: 0,<br />\n&nbsp; &nbsp; &quot;error&quot;: {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;message&quot;: &quot;The file is too big.&quot;<br />\n&nbsp; &nbsp; }<br />\n}</p>\n\n<p>åœ°å€ï¼š<a href=\"https://ckeditor.com/docs/ckeditor4/latest/guide/dev_file_upload.html\" rel=\"nofollow\" target=\"_blank\">https://ckeditor.com/docs/ckeditor4/latest/guide/dev_file_upload.html</a></p>\n\n<p>&nbsp;</p>\n\n<pre>\nreturn jsonify({&quot;uploaded&quot;: 1, &quot;fileName&quot;: rnd_name, &quot;url&quot;: url})</pre>\n',155,'http://blog.xiaosankexing.com/FrCOTng3iQEgcccbXzO6GBMa3u44',2,0,0),('2018-09-30 02:08:32','2018-10-02 00:29:59',6,'ckeditorä¸Šä¼ å›¾ç‰‡æ—¶ä¸åç«¯çš„csrfTokenéªŒè¯','æ£‹å­ã€‚','ckeditorä¸Šä¼ å›¾ç‰‡æ—¶ä¼šæäº¤è‡ªå·±çš„csrf tokenï¼Œåå­—å«â€œckCsrfTokenâ€œã€‚  å¦‚æœåç«¯é…ç½®æœ‰csrfæ ¡éªŒï¼Œè¿™ä¼šäº§ç”Ÿå†²çªï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ˜¯å¯¹æŒ‡å®šçš„è¡¨å•æäº¤æ·»åŠ csrfTokençš„HTMLçš„ä»£ç ï¼Œç¬¬äºŒç§æ˜¯ä¿®æ”¹csrfçš„cookieåç§°æ–¹æ³•ã€‚','<p>ckeditorä¸Šä¼ å›¾ç‰‡æ—¶ä¼šæäº¤è‡ªå·±çš„csrf tokenï¼Œåå­—å«&ldquo;ckCsrfToken&ldquo;ã€‚<br />\nå¦‚æœåç«¯é…ç½®æœ‰csrfæ ¡éªŒï¼Œè¿™ä¼šäº§ç”Ÿå†²çªï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ˜¯å¯¹æŒ‡å®šçš„è¡¨å•æäº¤æ·»åŠ csrfTokençš„HTMLçš„ä»£ç ï¼Œç¬¬äºŒç§æ˜¯ä¿®æ”¹csrfçš„cookieåç§°æ–¹æ³•ã€‚</p>\n\n<p>1ã€è®¾å®šckeditorçš„é»˜è®¤å€¼ï¼Œå¦‚æœæ˜¯é€šè¿‡æ¥å£æ‹¿æ•°æ®ï¼Œè¿™éœ€è¦ç­‰ckeditorå®ä¾‹æ„å»ºå®Œæˆåè®¾ç½®</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>editor.on(\"instanceReady\", function(ev) {\n  self.$http.get(url)\n    .then(function(response) {\n      if (response.body.success) {\n        ev.editor.setData(response.body.content);\n      }\n    });\n});\n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>2ã€é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡åœ¨ä¸Šä¼ å›¾ç‰‡è¡¨å•ä¸­æ’å…¥htmlä»£ç </p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>&lt;input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=getCookie(\"csrftoken\")&gt;</code></pre>\n\n<p>&nbsp;</p>\n\n<p>chromeå’ŒIEéƒ½æœ‰æ•ˆï¼Œä½†æ˜¯è¯¥æ–¹æ³•åœ¨firefoxä¸­æ— æ•ˆã€‚</p>\n\n<p>2ã€é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œä¿®æ”¹ckcsrfTokençš„å–å€¼å’Œåç§°ä¸åç«¯éœ€è¦çš„tokenåç§°å’Œå–å€¼ä¸€è‡´ï¼Œé€šè¿‡ä¿®æ”¹ckeditor.jsçš„æºç </p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>getCsrfToken:function(){\nvar a=CKEDITOR.tools.getCookie(\"ckCsrfToken\"); if(!a||40!=a.length){\nvar a=[],b=\"\"; \nif(window.crypto&amp;&amp;window.crypto.getRandomValues)\na=new Uint8Array(40),</code></pre>\n\n<p>&nbsp;</p>\n\n<p>æ”¹ä¸º</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>getCsrfToken:function(){\nvar a=CKEDITOR.tools.getCookie(\"csrftoken\"); if(!a||32!=a.length){\nvar a=[],b=\"\"; \nif(window.crypto&amp;&amp;window.crypto.getRandomValues)\na=new Uint8Array(32),</code></pre>\n\n<p>&nbsp;</p>\n\n<p>&ldquo;csrftoken&rdquo;ä¸ºcookieä¸­éœ€è¦è®¤è¯çš„csrftokenåç§°ï¼Œ32ä¸ºcsrftokençš„é•¿åº¦ï¼Œæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼›</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>a=new CKEDITOR.dom.element(\"input\"), a.setAttributes({name:\"ckCsrfToken\",type:\"hidden\"}),</code></pre>\n\n<p>&nbsp;</p>\n\n<p>æ”¹ä¸º</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>a=new CKEDITOR.dom.element(\"input\"), a.setAttributes({name:\"csrfmiddlewaretoken\",type:\"hidden\"}),</code></pre>\n\n<p>&nbsp;</p>\n\n<p>è¯¥æ–¹æ³•åœ¨firefoxä¸­æˆåŠŸæ‰§è¡Œï¼ŒåŒæ—¶ä¹Ÿå…¼å®¹å…¶å®ƒæµè§ˆå™¨ã€‚</p>\n',142,'http://blog.xiaosankexing.com/FrCOTng3iQEgcccbXzO6GBMa3u44',4,0,0),('2018-09-30 02:13:13','2018-10-10 01:59:17',7,'å…³äºCKEditorä»£ç é«˜äº®è®¾ç½®--æ‡’äººç‰ˆ','æ£‹å­ã€‚','æœ€è¿‘åœ¨åšè‡ªå·±çš„ä¸ªäººåšå®¢ç«™ç‚¹ï¼Œå…³äºåšå®¢çš„åœ¨çº¿ç¼–è¾‘å™¨æœ€ç»ˆé€‰æ‹©äº†CKEditorï¼Œåœ¨å…¬å¸ç”¨è¿‡ï¼Œåˆšå¥½å¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºä¼šå†æ·±å…¥äº†è§£ä¸‹ã€‚ Â  Â  ç”±äºåšå®¢çš„å®šä½æ˜¯æŠ€æœ¯åšå®¢ï¼Œæ‰€ä»¥è´´ä»£ç æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè€ŒCKEditoré»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½çš„ã€‚å› æ­¤æ‰¾äº†ç›¸å…³èµ„æ–™ï¼Œå‘ç°å…¶å®CKEditoræœ‰è¿™æ ·çš„æ’ä»¶ï¼Œè€Œä¸”é…ç½®èµ·æ¥éå¸¸ç®€å•ï¼Œæˆ‘å°±ç®€å•åˆ†äº«ä¸‹ï¼Œå¹¶ä½œä¸ºè®°å½•ã€‚','<p>æœ€è¿‘åœ¨åšè‡ªå·±çš„ä¸ªäººåšå®¢ç«™ç‚¹ï¼Œå…³äºåšå®¢çš„åœ¨çº¿ç¼–è¾‘å™¨æœ€ç»ˆé€‰æ‹©äº†CKEditorï¼Œåœ¨å…¬å¸ç”¨è¿‡ï¼Œåˆšå¥½å¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºä¼šå†æ·±å…¥äº†è§£ä¸‹ã€‚</p>\n\n<p>&nbsp; &nbsp; ç”±äºåšå®¢çš„å®šä½æ˜¯æŠ€æœ¯åšå®¢ï¼Œæ‰€ä»¥è´´ä»£ç æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè€ŒCKEditoré»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½çš„ã€‚å› æ­¤æ‰¾äº†ç›¸å…³èµ„æ–™ï¼Œå‘ç°å…¶å®CKEditoræœ‰è¿™æ ·çš„æ’ä»¶ï¼Œè€Œä¸”é…ç½®èµ·æ¥éå¸¸ç®€å•ï¼Œæˆ‘å°±ç®€å•åˆ†äº«ä¸‹ï¼Œå¹¶ä½œä¸ºè®°å½•ã€‚</p>\n\n<p>---------------------------------------------------------------------------------</p>\n\n<p>&nbsp; &nbsp; CKEditorå…³äºä»£ç é«˜äº®çš„æ’ä»¶å«åšCode Snippetï¼ˆä¸‹è½½åœ°å€<a href=\"http://ckeditor.com/addon/codesnippet\" rel=\"nofollow\" target=\"_blank\">http://ckeditor.com/addon/codesnippet</a>ï¼‰</p>\n\n<p>&nbsp; &nbsp; ç½‘ä¸Šæœ‰ä¸å°‘å…³äºè¿™ä¸ªæ’ä»¶é…ç½®çš„ä»‹ç»ï¼Œä½†ä½œä¸ºæ‡’äººï¼Œæ›´å–œæ¬¢å¿«é€Ÿçš„è·å–ç°æˆå·¥å…·ï¼Œè€ŒCKEditorä¹Ÿæ»¡è¶³äº† éœ€æ±‚ã€‚</p>\n\n<p>é¦–å…ˆï¼Œç™»å½•åˆ°ä¸‹è½½åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯ã€Add to my editorã€‘å’Œã€Downloadã€‘ï¼Œè‚¯å®šä¸å°‘äººç¬¬ä¸€ååº”æ˜¯ã€Downloadã€‘ï¼Œä½†åˆ«ç€æ€¥ï¼Œç›´æ¥ä¸‹è½½çš„è¯è¿˜éœ€è¦è‡ªå·±é…ç½®ï¼Œå¤šéº»çƒ¦å•Šã€‚æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ã€Add to my editorã€‘ï¼Œå­—é¢ä¸Šçš„æ„æ€å°±æ˜¯æ·»åŠ æˆ‘çš„ç¼–è¾‘å™¨ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174229_w3cb_2653731.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p>ç‚¹å‡»å®Œä¼šå‘ç°æŒ‰é’®å˜äº†ï¼Œå˜æˆã€removeã€‘äº†ï¼Œä½†æ²¡å‡ºç°ä»»ä½•ä¸œè¥¿ï¼Œåˆ«æ€¥ï¼Œçœ‹çœ‹å³è¾¹æ˜¯ä¸æ˜¯æœ‰ä¸ªã€Build my editorã€‘æŒ‰é’®ï¼ŒçŒ›å‡»å®ƒï¼Œå¤§åŠ›å‡ºå¥‡è¿¹ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174418_xTi2_2653731.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p>é©¬ä¸Šå°±è·³è½¬ç•Œé¢äº†ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„é…ç½®ç•Œé¢ï¼Œè¿™é‡Œ1ï¼Œ2ï¼Œ3é¡¹éƒ½å¯æ ¹æ®ä¸ªäººéœ€æ±‚å»é…ç½®æ’ä»¶ç­‰è®¾ç½®ï¼Œé…ç½®å®Œæœ€ä¸‹é¢çš„ã€Downloadã€‘å°±æ˜¯æˆ‘ä»¬è¦çš„äº†ï¼Œæ¥ä¸‹æ¥å°±è·Ÿä½¿ç”¨æ™®é€šçš„CKEditorä¸€æ ·é…ç½®äº†ï¼ŒæŠŠå®ƒæ”¾åˆ°ä½ å¾—é¡¹ç›®æ–‡ä»¶é‡Œã€‚</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174646_Pf3n_2653731.png\" /></p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174656_iapK_2653731.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p>æ”¾å¥½äº†å°±è¿è¡Œçœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å°±æœ‰äº†ï¼Ÿ</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174747_d4al_2653731.png\" /></p>\n\n<p><img alt=\"\" src=\"https://static.oschina.net/uploads/space/2016/1011/174759_dncE_2653731.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p>\n\n<p>&nbsp;</p>\n',124,'http://blog.xiaosankexing.com/FrCOTng3iQEgcccbXzO6GBMa3u44',4,0,2),('2018-10-01 17:28:21','2018-10-01 17:28:21',8,'js replaceå…¨éƒ¨æ›¿æ¢çš„æ–¹æ³•','æ£‹å­ã€‚','åœ¨å†™å‰ç«¯ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æ—¶å¸Œæœ›æ›¿æ¢æ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç†æ‰€å½“ç„¶çš„æƒ³åˆ°äº†replaceè¿™ä¸ªæ–¹æ³•ã€‚','<p>åœ¨å†™å‰ç«¯ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰æ—¶å¸Œæœ›æ›¿æ¢æ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç†æ‰€å½“ç„¶çš„æƒ³åˆ°äº†replaceè¿™ä¸ªæ–¹æ³•ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>ä½†æ˜¯åœ¨å®è·µä¸­å‘ç°javascriptä¸­çš„replaceæ–¹æ³•åªæ›¿æ¢å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç›®æ ‡ï¼Œæ¯”å¦‚ï¼š</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-javascript\">var str=\'æˆ‘æ˜¯ç”Ÿé•¿åœ¨ä¸­å›½å—æ–¹çš„çº¯æ­£ä¸­å›½äºº\';\nvar newstr=str.replace(\'ä¸­å›½\',\'å¤©æœ\');\nalert(newstr);</code></pre>\n\n<p><img alt=\"\" src=\"https://images0.cnblogs.com/blog/636960/201501/281019232222727.png\" /></p>\n\n<p>ç»“æœæ˜¯ï¼šæˆ‘æ˜¯ç”Ÿé•¿åœ¨<strong>å¤©æœ</strong>å—æ–¹çš„çº¯æ­£<strong>ä¸­å›½</strong>äººï¼Œè€Œä¸æ˜¯ï¼šæˆ‘æ˜¯ç”Ÿé•¿åœ¨<strong>å¤©æœ</strong>å—æ–¹çš„çº¯æ­£<strong>å¤©æœ</strong>äººã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>ç¬¬ä¸€ä¸ªç›®æ ‡&ldquo;ä¸­å›½&rdquo;è¢«æ›¿æ¢äº†ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæ²¡æœ‰è¢«æ›¿æ¢æ‰ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n\n<p>&nbsp;</p>\n\n<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹ï¼š</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-javascript\">var str = \'æˆ‘æ˜¯ç”Ÿé•¿åœ¨ä¸­å›½å—æ–¹çš„çº¯æ­£ä¸­å›½äºº\';\nvar reg = new RegExp( \'ä¸­å›½\' , \"g\" )\nvar newstr = str.replace( reg , \'å¤©æœ\' );\nalert(newstr);\n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>ç»“æœå°±æˆäº†æˆ‘ä»¬æƒ³è¦çš„ï¼šæˆ‘æ˜¯ç”Ÿé•¿åœ¨<strong>å¤©æœ</strong>å—æ–¹çš„çº¯æ­£<strong>å¤©æœ</strong>äººã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>ç›®çš„æ˜¯è¾¾åˆ°äº†ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·å†™çš„è¯ä¼¼ä¹æœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘ä»¬æŠŠä»–å°è£…ä¸€ä¸‹ã€‚</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-javascript\">String.prototype.myReplace=function(f,e){//å§fæ›¿æ¢æˆe\n    var reg=new RegExp(f,\"g\"); //åˆ›å»ºæ­£åˆ™RegExpå¯¹è±¡   \n    return this.replace(reg,e); \n}\n\n//åº”ç”¨ç¤ºä¾‹\nvar str=\'æˆ‘æ˜¯ç”Ÿé•¿åœ¨ä¸­å›½å—æ–¹çš„çº¯æ­£ä¸­å›½äºº\';\nvar newstr=str.myReplace(\'ä¸­å›½\',\'å¤©æœ\');\nalert(newstr);</code></pre>\n\n<p>&nbsp;</p>\n\n<p>åˆ°æ­¤æˆ‘ä»¬å¯¹javascriptæ›¿æ¢ä¸å®Œå…¨çš„é—®é¢˜å°±å®Œç¾è§£å†³äº†ï¼</p>\n',109,'http://blog.xiaosankexing.com/FojBI5JJ8S6Qqv_9U9iz_ze4oEiW',4,0,0),('2018-10-01 17:30:46','2018-10-02 00:20:13',9,'JS å¯¹è±¡(Object)å’Œå­—ç¬¦ä¸²(String)äº’è½¬æ–¹æ³•','æ£‹å­ã€‚','JS å¯¹è±¡(Object)å’Œå­—ç¬¦ä¸²(String)äº’è½¬æ–¹æ³•','<p><strong>JS å¯¹è±¡(Object)å’Œå­—ç¬¦ä¸²(String)äº’è½¬æ–¹æ³•</strong></p>\n\n<p>&nbsp;</p>\n\n<p>åˆ©ç”¨åŸç”ŸJSONå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬ä¸ºå­—ç¬¦ä¸²</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>    // å­—ç¬¦ä¸²è½¬åŒ–ä¸º å¯¹è±¡\n    var jsonString = \'[{\"name\":\"å¤©é¸½\"},{\"name\":\"æ¢…èŠ±\"},{\"name\":\"å°é£\"}]\';\n\n    // console.log(JSON.parse(jsonString));\n    var jsArr = JSON.parse(jsonString);\n\n    jsArr.push({\"name\":\"å¸•å¡\"});\n\n    console.log(jsArr);\n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>ä»JSONå­—ç¬¦ä¸²è½¬ä¸ºå¯¹è±¡</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>    // æŠŠjså¯¹è±¡ æ•°ç»„ è½¬åŒ–ä¸º JSONæ ¼å¼çš„å­—ç¬¦ä¸²\n    var result = JSON.stringify(jsArr);\n\n    console.log(result);</code></pre>\n\n<p>&nbsp;</p>\n',113,'http://blog.xiaosankexing.com/FojBI5JJ8S6Qqv_9U9iz_ze4oEiW',4,0,0),('2018-10-02 00:23:28','2018-10-10 01:59:25',10,'å‰ç«¯é¡µé¢ä»£ç é«˜äº®æ˜¾ç¤º','æ£‹å­ã€‚','å‰é¢è®²äº†æ€ä¹ˆåœ¨åå°ç¼–è¾‘å™¨ä¸­ä½¿ç”¨CKEditorä»£ç é«˜äº®æ˜¾ç¤º(ä»£ç å¹¶è‰²)æ’ä»¶Code Snippetçš„å®‰è£…åŠä½¿ç”¨æ–¹æ³•ã€‚','<p>å‰é¢è®²äº†æ€ä¹ˆåœ¨åå°ç¼–è¾‘å™¨ä¸­ä½¿ç”¨CKEditorä»£ç é«˜äº®æ˜¾ç¤º(ä»£ç å¹¶è‰²)æ’ä»¶Code Snippetçš„å®‰è£…åŠä½¿ç”¨æ–¹æ³•ã€‚</p>\n\n<p>&nbsp;</p>\n\n<h2>é‚£ä¹ˆå¦‚ä½•è®©ä»£ç ç‰‡æ®µåœ¨æ™®é€šé¡µé¢ä¸Šæ˜¾ç¤ºé«˜äº®ï¼Ÿ</h2>\n\n<p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œè™½ç„¶åœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ çš„ä»£ç ç‰‡æ®µæœ‰é«˜äº®æ•ˆæœï¼Œä½†æ˜¯å°†ç¼–è¾‘å™¨é‡Œçš„ä»£ç ç‰‡æ®µæ”¾åˆ°é¡µé¢ä¸­å´æ²¡æœ‰é«˜äº®çš„æ•ˆæœã€‚è¿™æ˜¯å› ä¸ºç¼–è¾‘å™¨çš„æ’ä»¶å·²ç»é»˜è®¤é›†æˆäº†highlight.jsè¿™ä¸ªä»£ç é«˜äº®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºé«˜äº®å°±å¾—é‡æ–°å¼•ç”¨å’Œæ·»åŠ highlight.jsåº“ã€‚</p>\n\n<p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ç¼–è¾‘å™¨ä¸­çš„é«˜äº®ä»£ç ï¼š</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-html\">&lt;pre&gt;\n&lt;code class=\"language-html\"&gt;&amp;lt;!DOCTYPE html&amp;gt;\n \n&amp;lt;html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\"&amp;gt;\n&amp;lt;head&amp;gt;\n    &amp;lt;meta charset=\"utf-8\" /&amp;gt;\n    &amp;lt;title&amp;gt;æµ‹è¯•é¡µé¢&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n&amp;lt;body&amp;gt;\n&amp;lt;div&amp;gt;ä»£ç ç‰‡æ®µé«˜äº®æ•ˆæœ&amp;lt;/div&amp;gt;\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;\n</code></pre>\n\n<pre>\n\nå¯ä»¥çœ‹åˆ°&nbsp;é«˜äº®çš„æ•ˆæœä¸»è¦æ˜¯æ ¹æ®&lt;pre&gt;æ ‡ç­¾å’Œ &lt;code class=&quot;language-html&quot;&gt;è¿™ä¸¤ä¸ªæ ‡ç­¾æ¥æ˜¾ç¤ºçš„ï¼Œå…¶ä¸­language-htmlè¡¨ç¤ºçš„æ˜¾ç¤ºé«˜äº®è¯­è¨€ä¸ºHTMLã€‚ highlight.jså°±æ˜¯æ ¹æ®è¿™ä¸¤ä¸ªæ ‡ç­¾æ¥æ˜¾ç¤ºé«˜äº®æ•ˆæœã€‚</pre>\n\n<p>æˆ‘ä»¬é¦–å…ˆè¦å°†highlight.jsä¸‹è½½ä¸‹æ¥ï¼ˆ<a href=\"http://highlightjs.org/download/\" rel=\"nofollow\" target=\"_blank\">ä¸‹è½½åœ°å€</a>ï¼Œå¯ä»¥é€‰æ‹©è¦é«˜äº®çš„ç¼–ç¨‹è¯­è¨€ç§ç±»ï¼‰ï¼Œç„¶ååœ¨éœ€è¦ä»£ç é«˜äº®çš„é¡µé¢æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p>\n\n<pre>\n\n\n&nbsp;</pre>\n\n<pre>\n<code class=\"language-html\">&lt;!--å¼€å¤´è¿™é‡Œçš„æ ·å¼ä¸ºé»˜è®¤çš„é£æ ¼ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ›´æ¢é£æ ¼--&gt;\n&lt;!--æˆ‘çš„é«˜äº®æ•ˆæœæ˜¯Androidstudio--&gt;\n&lt;link rel=\"stylesheet\" href=\"styles/default.css\"&gt;\n&lt;script src=\"highlight.pack.js\"&gt;&lt;/script&gt;\n&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;\n</code></pre>\n\n<pre>\n\n\n\nè¦æ³¨æ„æ›´æ”¹cssæ ·å¼å’ŒJSçš„å¼•ç”¨åœ°å€ï¼Œåœ°å€ä»¥è‡ªå·±ç½‘ç«™ä¸­highlight.jsçš„å­˜æ”¾åœ°å€ä¸ºå‡†ã€‚å¦å¤–é«˜äº®åº“é»˜è®¤ä½¿ç”¨çš„æ˜¯default.cssçš„é«˜äº®é£æ ¼ï¼Œè¿™é‡Œæ˜¯highlightjsçš„å„ç§ä»£ç é«˜äº®é£æ ¼çš„æ˜¾ç¤ºæ•ˆæœï¼Œå¤§å®¶å¯ä»¥åˆ°ä¸Šé¢æµ‹è¯•é€‰æ‹©è‡ªå·±å–œæ¬¢çš„é«˜äº®é£æ ¼ï¼š<a href=\"http://highlightjs.org/static/test.html\" rel=\"nofollow\" style=\"font-family: sans-serif, Arial, Verdana, &quot;Trebuchet MS&quot;, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\" target=\"_blank\">http://highlightjs.org/static/test.html</a><span style=\"font-family:sans-serif,Arial,Verdana,&quot;Trebuchet MS&quot;,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;\">ã€‚highlightjsçš„å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹å®˜ç½‘çš„æ–‡æ¡£ï¼š</span><a href=\"http://highlightjs.org/usage/\" rel=\"nofollow\" style=\"font-family: sans-serif, Arial, Verdana, &quot;Trebuchet MS&quot;, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\" target=\"_blank\">http://highlightjs.org/usage/</a><span style=\"font-family:sans-serif,Arial,Verdana,&quot;Trebuchet MS&quot;,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;\">ã€‚</span></pre>\n\n<p>åˆ°è¿™é‡Œå°±å¯ä»¥å®Œæ•´çš„å°†ä»£ç ç‰‡æ®µè¿›è¡Œé«˜äº®æ˜¾ç¤ºäº†ã€‚</p>\n\n<p>å…³äºæ•ˆæœï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æœ¬æ–‡çš„æ•ˆæœã€‚</p>\n',135,'http://blog.xiaosankexing.com/FojBI5JJ8S6Qqv_9U9iz_ze4oEiW',4,0,0),('2018-10-02 15:54:27','2018-10-03 16:16:41',11,'åšå®¢å›¾ç‰‡ç‚¹å‡»æ”¾å¤§ï¼Œå†ç‚¹æ¢å¤åŸçŠ¶','æ£‹å­ã€‚','jsä»£ç æ§åˆ¶å›¾ç‰‡ç‚¹å‡»æ”¾å¤§ï¼Œå†æ¬¡ç‚¹å‡»æ¢å¤åŸçŠ¶','<h2><strong>1. jsä»£ç éƒ¨åˆ†æ”¾äºé¡µè„šHTMLä»£ç </strong></h2>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-javascript\">&lt;script type=\"text/javascript\"&gt; \n    //å›¾ç‰‡æ”¾å¤§  \n    $(\"#outerdiv\").hide();\n    $(function(){  \n    $(\"img\").mouseover(function(){\n        $(this).css(\"cursor\",\"pointer\");\n    });\n\n    $(\"img\").click(function(){  \n        var _this = $(this);//å°†å½“å‰çš„pimgå…ƒç´ ä½œä¸º_thisä¼ å…¥å‡½æ•°    \n        imgShow(\"#outerdiv\", \"#bigimg\", _this);    \n      });     \n    });    \n\n    function imgShow(outerdiv, bigimg, _this){  \n        var src = _this.attr(\"src\");//è·å–å½“å‰ç‚¹å‡»çš„pimgå…ƒç´ ä¸­çš„srcå±æ€§    \n        $(\'#outerdiv\').attr(\'display\',\'block\');  \n        $(bigimg).attr(\"src\", src);//è®¾ç½®#bigimgå…ƒç´ çš„srcå±æ€§    \n         $(outerdiv).fadeIn(\"fast\");  \n        \n    $(outerdiv).click(function(){//å†æ¬¡ç‚¹å‡»æ·¡å‡ºæ¶ˆå¤±å¼¹å‡ºå±‚    \n        $(this).fadeOut(\"fast\");    \n    });    \n&lt;/script&gt;  </code></pre>\n\n<p>&nbsp;</p>\n\n<h2><strong>2. htmlä»£ç éƒ¨åˆ†ä¹Ÿæ”¾äºé¡µè„šHTMLä»£ç </strong></h2>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-html\">&lt;div id=\"outerdiv\" style=\"text-align: center;position: fixed;z-index: 1000;top: 0;left: 0;\n    width: 100%;height: 100%;background-color: rgba(255,255,255,.9);\"&gt;\n    &lt;img id=\"bigimg\" style=\"height: auto;width: 46.6325%;border: 0; \n        margin: auto;position: absolute;top: 0;bottom: 0;left: 0;right: 0;\" src=\"\" /&gt;\n&lt;/div&gt; </code></pre>\n\n<p>&nbsp;</p>\n',4,'http://blog.xiaosankexing.com/FojBI5JJ8S6Qqv_9U9iz_ze4oEiW',4,0,0),('2018-10-03 18:40:48','2018-10-09 21:45:54',12,'å½“MySQLé‡åˆ°emojiè¡¨æƒ…ğŸ¤£','æ£‹å­ã€‚','åœ¨æ•°æ®åº“ä¸­æ’å…¥emojiè¡¨æƒ…æ—¶æŠ¥é”™ï¼Œmysqlçš„UTF-8åªæ”¯æŒä¸‰ä¸ªå­—èŠ‚çš„å­˜å‚¨ï¼Œè€Œä¸€èˆ¬å­—ç¬¦æ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯emojiè¡¨æƒ…æ˜¯4ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å­˜å‚¨ä¸äº†ã€‚','<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>åœ¨æ•°æ®åº“ä¸­æ’å…¥emojiè¡¨æƒ…æ—¶æŠ¥é”™ï¼Œmysqlçš„UTF-8åªæ”¯æŒä¸‰ä¸ªå­—èŠ‚çš„å­˜å‚¨ï¼Œè€Œä¸€èˆ¬å­—ç¬¦æ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯emojiè¡¨æƒ…æ˜¯4ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å­˜å‚¨ä¸äº†ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>è€Œmysqlä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨5.5.3ç‰ˆæœ¬ä¹‹åè½¬è€Œæ”¯æŒäº†å­˜å‚¨4ä¸ªå­—èŠ‚çš„utf8å­—ç¬¦ï¼Œå­—ç¬¦é›†ä¸ºutf8mb4.è¿™ä¸ªç›¸å½“äºwindowsX64å’ŒwindowsX86çš„åŒºåˆ«ï¼Œ64ä½æ˜¯å…¼å®¹32ä½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´utf8mb4å­˜å–utf8éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>é‚£ä¹ˆåœ¨æœ‰è¡¨æƒ…çš„å­—æ®µä¸Šå°±åº”è¯¥è¿™æ ·åš,å°†è¯¥å­—æ®µè®¾ç½®ä¸ºutf8mb4</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>Â ALTER TABLE table_name MODIFY Â colum_nameÂ  VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</code></pre>\n\n<p>&nbsp;</p>\n\n<p>ç„¶è€Œä½ è¿˜éœ€è¦è®¾ç½®ä¸‹è¡¨çš„å­—ç¬¦é›†</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code> ALTER TABLE table_name CHARSET=utf8mb4;</code></pre>\n\n<p>&nbsp;</p>\n\n<p>å½“ç„¶ä½ å¯èƒ½è¿˜éœ€è¦è®¾ç½®æœ¬æ•°æ®åº“ä¸ºutf8mb4å•Š</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code> SET NAMES utf8mb4</code></pre>\n\n<p>&nbsp;</p>\n\n<p>ç„¶åé‡å¯mysqlã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>æŸ¥çœ‹æ•°æ®åº“ç¼–ç ç±»å‹</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-sql\">show variables like \'character%\';Â </code></pre>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-sql\">mysql&gt; show variables like \'character%\';\n+--------------------------+-----------------------------------------------------------+\n| Variable_name            | Value                                                     |\n+--------------------------+-----------------------------------------------------------+\n| character_set_client     | utf8mb4                                                   |\n| character_set_connection | utf8mb4                                                   |\n| character_set_database   | utf8mb4                                                   |\n| character_set_filesystem | binary                                                    |\n| character_set_results    | utf8mb4                                                   |\n| character_set_server     | utf8mb4                                                   |\n| character_set_system     | utf8                                                      |\n| character_sets_dir       | /usr/local/mysql-5.7.18-macos10.12-x86_64/share/charsets/ |\n+--------------------------+-----------------------------------------------------------+\n8 rows in set (0.00 sec)</code></pre>\n\n<p>&nbsp;</p>\n\n<p>ç„¶åå°±æ˜¯åœ¨è¿æ¥æ•°æ®åº“çš„ä»£ç å¤„è®¾ç½®</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-sql\">SQLALCHEMY_DATABASE_URI = \"mysql://root:passwd@127.0.0.1:3306/databasename?charset=utf8mb4\"</code></pre>\n\n<p>&nbsp;</p>\n\n<p>å¦å¤–ä¸è¦å¿˜äº†æ¨¡å‹ç±»</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-sql\">è®¾ç½®æ•°æ®åº“è¡¨ç¼–ç æ–¹å¼ä¸ºutf8mb4\nclass User(Base):    \n    __tablename__ = \'tb_userâ€™		\n    id = Column(Integer,primary_key = True,autoincrement=True)    \n    name = Column(String(250),nullable=False,unique = True,comment=u\"å§“å\")    \n    __table_args__ = {        \n        \"mysql_charset\" : \"utf8mb4\"\n    }</code></pre>\n\n<p>&nbsp;</p>\n\n<p>é‚£ä¹ˆï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æäº¤æ•°æ®çš„æ—¶å€™æ’å…¥emojiè¡¨æƒ…äº†ï¼Œå¹¶ä¸”å–å‡ºçš„ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå°±å¥½åƒè¿™æ ·ğŸ‘ğŸ‘€ğŸ‘¿</p>\n',3,'http://blog.xiaosankexing.com/FiEL1PcKh8m913z0rpAJkDowWcjs',4,0,0),('2018-10-03 19:12:26','2018-10-03 21:58:50',13,'è¯„è®ºç•™è¨€XSSé˜²å¾¡','æ£‹å­ã€‚','æ˜¨æ™šå‡†å¤‡ç¡è§‰çš„æ—¶å€™çªç„¶æƒ³èµ·ï¼Œæˆ‘å¥½åƒæ²¡æœ‰è¿‡æ»¤ç•™è¨€å’Œè¯„è®ºï¼Œé‚£å²‚ä¸æ˜¯èƒ½å¤Ÿxss','<p>æ˜¨æ™šå‡†å¤‡ç¡è§‰çš„æ—¶å€™çªç„¶æƒ³èµ·ï¼Œæˆ‘å¥½åƒæ²¡æœ‰è¿‡æ»¤ç•™è¨€å’Œè¯„è®ºï¼Œé‚£å²‚ä¸æ˜¯èƒ½å¤Ÿxss</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"/static/upload/201810031855122343.png\" /></p>\n\n<p>&nbsp;</p>\n\n<p>æ‰“å¼€ç”µè„‘ä¸€æµ‹è¯•ï¼Œæœç„¶ï¼Œå­˜å‚¨å‹xss</p>\n\n<p>&nbsp;</p>\n\n<p>æ•°æ®å…¥åº“çš„æ—¶å€™å’Œå–å‡ºå±•ç¤ºçš„æ—¶å€™æ²¡æœ‰è¿›è¡Œè¿‡æ»¤</p>\n\n<p>&nbsp;</p>\n\n<p>ä¸‰ç§æ–¹æ³•ï¼Œä¸€æ˜¯åœ¨å‰ç«¯æäº¤æ—¶è¿‡æ»¤ï¼Œä¸€æ˜¯åœ¨åç«¯å­˜å…¥æ•°æ®åº“çš„è¿‡æ»¤</p>\n\n<p>&nbsp;</p>\n\n<p>è¿˜æœ‰å°±æ˜¯åœ¨æäº¤ç»™å‰ç«¯å±•ç¤ºæ—¶è¿‡æ»¤ï¼Œç„¶è€Œæˆ‘æŠŠä¸‰ç§éƒ½åŠ ä¸Šäº†ğŸ‘¿</p>\n\n<p>&nbsp;</p>\n\n<p>ç›´æ¥åœ¨ä¸‰å¤„åŠ ä¸Šè¿‡æ»¤&lt;&gt;å°–æ‹¬å·çš„ä»£ç ï¼Œç®€å•ç²—æš´</p>\n',6,'http://blog.xiaosankexing.com/FhYkQ41ywqoap1fiO-USDwi8GK8x',4,0,0),('2018-10-03 23:14:58','2018-10-03 23:29:01',14,'ä½¿ç”¨ Python å’Œ Flask è®¾è®¡ RESTful API','æ£‹å­ã€‚','è¿‘äº›å¹´æ¥ REST (REpresentational State Transfer) å·²ç»å˜æˆäº† web services å’Œ web APIs çš„æ ‡é…ã€‚  åœ¨æœ¬æ–‡ä¸­æˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ç®€å•åœ°ä½¿ç”¨ Python å’Œ Flask æ¡†æ¶æ¥åˆ›å»ºä¸€ä¸ª RESTful çš„ web serviceã€‚','<p>è¿‘äº›å¹´æ¥ REST (REpresentational State Transfer) å·²ç»å˜æˆäº† web services å’Œ web APIs çš„æ ‡é…ã€‚</p>\n\n<p>åœ¨æœ¬æ–‡ä¸­æˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ç®€å•åœ°ä½¿ç”¨ Python å’Œ Flask æ¡†æ¶æ¥åˆ›å»ºä¸€ä¸ª RESTful çš„ web serviceã€‚</p>\n\n<h2>ä»€ä¹ˆæ˜¯ RESTï¼Ÿ</h2>\n\n<p>å…­æ¡è®¾è®¡è§„èŒƒå®šä¹‰äº†ä¸€ä¸ª REST ç³»ç»Ÿçš„ç‰¹ç‚¹:</p>\n\n<ul>\n	<li><strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨</strong>: å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éš”ç¦»ï¼ŒæœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œå®¢æˆ·ç«¯è¿›è¡Œæ¶ˆè´¹ã€‚</li>\n	<li><strong>æ— çŠ¶æ€</strong>: ä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åŒ…å«ç†è§£è¯·æ±‚æ‰€å¿…éœ€çš„ä¿¡æ¯ã€‚æ¢å¥è¯è¯´ï¼Œ æœåŠ¡å™¨ä¸ä¼šå­˜å‚¨å®¢æˆ·ç«¯ä¸Šä¸€æ¬¡è¯·æ±‚çš„ä¿¡æ¯ç”¨æ¥ç»™ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚</li>\n	<li><strong>å¯ç¼“å­˜</strong>: æœåŠ¡å™¨å¿…é¡»æ˜ç¤ºå®¢æˆ·ç«¯è¯·æ±‚èƒ½å¦ç¼“å­˜ã€‚</li>\n	<li><strong>åˆ†å±‚ç³»ç»Ÿ</strong>: å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åº”è¯¥ä»¥ä¸€ç§æ ‡å‡†çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸­é—´å±‚ä»£æ›¿æœåŠ¡å™¨åšå‡ºå“åº”çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦åšä»»ä½•å˜åŠ¨ã€‚</li>\n	<li><strong>ç»Ÿä¸€çš„æ¥å£</strong>: æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é€šä¿¡æ–¹æ³•å¿…é¡»æ˜¯ç»Ÿä¸€çš„ã€‚</li>\n	<li><strong>æŒ‰éœ€ç¼–ç </strong>: æœåŠ¡å™¨å¯ä»¥æä¾›å¯æ‰§è¡Œä»£ç æˆ–è„šæœ¬ï¼Œä¸ºå®¢æˆ·ç«¯åœ¨å®ƒä»¬çš„ç¯å¢ƒä¸­æ‰§è¡Œã€‚è¿™ä¸ªçº¦æŸæ˜¯å”¯ä¸€ä¸€ä¸ªæ˜¯å¯é€‰çš„ã€‚</li>\n</ul>\n\n<h2>ä»€ä¹ˆæ˜¯ä¸€ä¸ª RESTful çš„ web serviceï¼Ÿ</h2>\n\n<p>REST æ¶æ„çš„æœ€åˆç›®çš„æ˜¯é€‚åº”ä¸‡ç»´ç½‘çš„ HTTP åè®®ã€‚</p>\n\n<p>RESTful web services æ¦‚å¿µçš„æ ¸å¿ƒå°±æ˜¯&ldquo;èµ„æº&rdquo;ã€‚ èµ„æºå¯ä»¥ç”¨&nbsp;<a href=\"https://en.wikipedia.org/wiki/Uniform_resource_identifier\">URI</a>&nbsp;æ¥è¡¨ç¤ºã€‚å®¢æˆ·ç«¯ä½¿ç”¨ HTTP åè®®å®šä¹‰çš„æ–¹æ³•æ¥å‘é€è¯·æ±‚åˆ°è¿™äº› URIsï¼Œå½“ç„¶å¯èƒ½ä¼šå¯¼è‡´è¿™äº›è¢«è®¿é—®çš„&rdquo;èµ„æº&ldquo;çŠ¶æ€çš„æ”¹å˜ã€‚</p>\n\n<p>HTTP æ ‡å‡†çš„æ–¹æ³•æœ‰å¦‚ä¸‹:</p>\n\n<pre>\n<code>==========  =====================  ==================================\nHTTP æ–¹æ³•   è¡Œä¸º                   ç¤ºä¾‹\n==========  =====================  ==================================\nGET         è·å–èµ„æºçš„ä¿¡æ¯         http://example.com/api/orders\nGET         è·å–æŸä¸ªç‰¹å®šèµ„æºçš„ä¿¡æ¯ http://example.com/api/orders/123\nPOST        åˆ›å»ºæ–°èµ„æº             http://example.com/api/orders\nPUT         æ›´æ–°èµ„æº               http://example.com/api/orders/123\nDELETE      åˆ é™¤èµ„æº               http://example.com/api/orders/123\n==========  ====================== ==================================</code></pre>\n\n<p>REST è®¾è®¡ä¸éœ€è¦ç‰¹å®šçš„æ•°æ®æ ¼å¼ã€‚åœ¨è¯·æ±‚ä¸­æ•°æ®å¯ä»¥ä»¥&nbsp;<a href=\"http://en.wikipedia.org/wiki/JSON\">JSON</a>&nbsp;å½¢å¼, æˆ–è€…æœ‰æ—¶å€™ä½œä¸º url ä¸­æŸ¥è¯¢å‚æ•°é¡¹ã€‚</p>\n\n<h2>è®¾è®¡ä¸€ä¸ªç®€å•çš„ web service</h2>\n\n<p>åšæŒ REST çš„å‡†åˆ™è®¾è®¡ä¸€ä¸ª web service æˆ–è€… API çš„ä»»åŠ¡å°±å˜æˆä¸€ä¸ªæ ‡è¯†èµ„æºè¢«å±•ç¤ºå‡ºæ¥ä»¥åŠå®ƒä»¬æ˜¯æ€æ ·å—ä¸åŒçš„è¯·æ±‚æ–¹æ³•å½±å“çš„ç»ƒä¹ ã€‚</p>\n\n<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºè€Œä¸”æˆ‘ä»¬æƒ³è¦ä¸ºå®ƒè®¾è®¡ä¸€ä¸ª web serviceã€‚è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å†³å®šç”¨ä»€ä¹ˆæ ·çš„æ ¹ URL æ¥è®¿é—®è¯¥æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥è®¿é—®:</p>\n\n<p><a href=\"http://[hostname]/todo/api/v1.0/\">http://[hostname]/todo/api/v1.0/</a></p>\n\n<p>åœ¨è¿™é‡Œæˆ‘å·²ç»å†³å®šåœ¨ URL ä¸­åŒ…å«åº”ç”¨çš„åç§°ä»¥åŠ API çš„ç‰ˆæœ¬å·ã€‚åœ¨ URL ä¸­åŒ…å«åº”ç”¨åç§°æœ‰åŠ©äºæä¾›ä¸€ä¸ªå‘½åç©ºé—´ä»¥ä¾¿åŒºåˆ†åŒä¸€ç³»ç»Ÿä¸Šçš„å…¶å®ƒæœåŠ¡ã€‚åœ¨ URL ä¸­åŒ…å«ç‰ˆæœ¬å·èƒ½å¤Ÿå¸®åŠ©ä»¥åçš„æ›´æ–°ï¼Œå¦‚æœæ–°ç‰ˆæœ¬ä¸­å­˜åœ¨æ–°çš„å’Œæ½œåœ¨ä¸å…¼å®¹çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸å½±å“ä¾èµ–äºè¾ƒæ—§çš„åŠŸèƒ½çš„åº”ç”¨ç¨‹åºã€‚</p>\n\n<p>ä¸‹ä¸€æ­¥éª¤å°±æ˜¯é€‰æ‹©å°†ç”±è¯¥æœåŠ¡æš´éœ²(å±•ç¤º)çš„èµ„æºã€‚è¿™æ˜¯ä¸€ä¸ªååˆ†ç®€å•åœ°åº”ç”¨ï¼Œæˆ‘ä»¬åªæœ‰ä»»åŠ¡ï¼Œå› æ­¤åœ¨æˆ‘ä»¬å¾…åŠäº‹é¡¹ä¸­å”¯ä¸€çš„èµ„æºå°±æ˜¯ä»»åŠ¡ã€‚</p>\n\n<p>æˆ‘ä»¬çš„ä»»åŠ¡èµ„æºå°†è¦ä½¿ç”¨ HTTP æ–¹æ³•å¦‚ä¸‹:</p>\n\n<pre>\n<code>==========  ===============================================  =============================\nHTTP æ–¹æ³•   URL                                              åŠ¨ä½œ\n==========  ===============================================  ==============================\nGET         http://[hostname]/todo/api/v1.0/tasks            æ£€ç´¢ä»»åŠ¡åˆ—è¡¨\nGET         http://[hostname]/todo/api/v1.0/tasks/[task_id]  æ£€ç´¢æŸä¸ªä»»åŠ¡\nPOST        http://[hostname]/todo/api/v1.0/tasks            åˆ›å»ºæ–°ä»»åŠ¡\nPUT         http://[hostname]/todo/api/v1.0/tasks/[task_id]  æ›´æ–°ä»»åŠ¡\nDELETE      http://[hostname]/todo/api/v1.0/tasks/[task_id]  åˆ é™¤ä»»åŠ¡\n==========  ================================================ =============================</code></pre>\n\n<p>æˆ‘ä»¬å®šä¹‰çš„ä»»åŠ¡æœ‰å¦‚ä¸‹ä¸€äº›å±æ€§:</p>\n\n<ul>\n	<li><strong>id</strong>: ä»»åŠ¡çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚æ•°å­—ç±»å‹ã€‚</li>\n	<li><strong>title</strong>: ç®€çŸ­çš„ä»»åŠ¡æè¿°ã€‚å­—ç¬¦ä¸²ç±»å‹ã€‚</li>\n	<li><strong>description</strong>: å…·ä½“çš„ä»»åŠ¡æè¿°ã€‚æ–‡æœ¬ç±»å‹ã€‚</li>\n	<li><strong>done</strong>: ä»»åŠ¡å®Œæˆçš„çŠ¶æ€ã€‚å¸ƒå°”å€¼ã€‚</li>\n</ul>\n\n<p>ç›®å‰ä¸ºæ­¢å…³äºæˆ‘ä»¬çš„ web service çš„è®¾è®¡åŸºæœ¬å®Œæˆã€‚å‰©ä¸‹çš„äº‹æƒ…å°±æ˜¯å®ç°å®ƒï¼</p>\n\n<h2>Flask æ¡†æ¶çš„ç®€ä»‹</h2>\n\n<p>å¦‚æœä½ è¯»è¿‡&nbsp;<a href=\"http://www.pythondoc.com/flask-mega-tutorial/index.html\">Flask Mega-Tutorial ç³»åˆ—</a>ï¼Œå°±ä¼šçŸ¥é“ Flask æ˜¯ä¸€ä¸ªç®€å•å´ååˆ†å¼ºå¤§çš„ Python web æ¡†æ¶ã€‚</p>\n\n<p>åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶ web services çš„ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸€ä¸ªæ™®é€šçš„ Flask Web åº”ç”¨ç¨‹åºçš„ç»“æ„ã€‚</p>\n\n<p>æˆ‘ä¼šé¦–å…ˆå‡è®¾ä½ çŸ¥é“ Python åœ¨ä½ çš„å¹³å°ä¸Šå·¥ä½œçš„åŸºæœ¬çŸ¥è¯†ã€‚ æˆ‘å°†è®²è§£çš„ä¾‹å­æ˜¯å·¥ä½œåœ¨ä¸€ä¸ªç±» Unix æ“ä½œç³»ç»Ÿã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ„å‘³ç€å®ƒä»¬èƒ½å·¥ä½œåœ¨ Linuxï¼ŒMac OS X å’Œ Windows(å¦‚æœä½ ä½¿ç”¨Cygwin)ã€‚ å¦‚æœä½ ä½¿ç”¨ Windows ä¸ŠåŸç”Ÿçš„ Python ç‰ˆæœ¬çš„è¯ï¼Œå‘½ä»¤ä¼šæœ‰æ‰€ä¸åŒã€‚</p>\n\n<p>è®©æˆ‘ä»¬å¼€å§‹åœ¨ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒä¸Šå®‰è£… Flaskã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæ²¡æœ‰ virtualenvï¼Œä½ å¯ä»¥ä»&nbsp;<a href=\"https://pypi.python.org/pypi/virtualenv\">https://pypi.python.org/pypi/virtualenv</a>&nbsp;ä¸Šä¸‹è½½:</p>\n\n<pre>\n<code>$ mkdir todo-api\n$ cd todo-api\n$ virtualenv flask\nNew python executable in flask/bin/python\nInstalling setuptools............................done.\nInstalling pip...................done.\n$ flask/bin/pip install flask</code></pre>\n\n<p>æ—¢ç„¶å·²ç»å®‰è£…äº† Flaskï¼Œç°åœ¨å¼€å§‹åˆ›å»ºä¸€ä¸ªç®€å•åœ°ç½‘é¡µåº”ç”¨ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªå« app.py çš„æ–‡ä»¶ä¸­:</p>\n\n<pre>\n<code>#!flask/bin/python\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route(\'/\')\ndef index():\n    return \"Hello, World!\"\n\nif __name__ == \'__main__\':\n    app.run(debug=True)</code></pre>\n\n<p>ä¸ºäº†è¿è¡Œè¿™ä¸ªç¨‹åºæˆ‘ä»¬å¿…é¡»æ‰§è¡Œ app.py:</p>\n\n<pre>\n<code>$ chmod a+x app.py\n$ ./app.py\n * Running on http://127.0.0.1:5000/\n * Restarting with reloader</code></pre>\n\n<p>ç°åœ¨ä½ å¯ä»¥å¯åŠ¨ä½ çš„ç½‘é¡µæµè§ˆå™¨ï¼Œè¾“å…¥&nbsp;<a href=\"http://localhost:5000/\">http://localhost:5000</a>&nbsp;çœ‹çœ‹è¿™ä¸ªå°åº”ç”¨ç¨‹åºçš„æ•ˆæœã€‚</p>\n\n<p>ç®€å•å§ï¼Ÿç°åœ¨æˆ‘ä»¬å°†è¿™ä¸ªåº”ç”¨ç¨‹åºè½¬æ¢æˆæˆ‘ä»¬çš„ RESTful serviceï¼</p>\n\n<h2>ä½¿ç”¨ Python å’Œ Flask å®ç° RESTful services</h2>\n\n<p>ä½¿ç”¨ Flask æ„å»º web services æ˜¯ååˆ†ç®€å•åœ°ï¼Œæ¯”æˆ‘åœ¨&nbsp;<a href=\"http://www.pythondoc.com/flask-mega-tutorial/index.html\">Mega-Tutorial</a>&nbsp;ä¸­æ„å»ºçš„å®Œæ•´çš„æœåŠ¡ç«¯çš„åº”ç”¨ç¨‹åºè¦ç®€å•åœ°å¤šã€‚</p>\n\n<p>åœ¨ Flask ä¸­æœ‰è®¸å¤šæ‰©å±•æ¥å¸®åŠ©æˆ‘ä»¬æ„å»º RESTful servicesï¼Œä½†æ˜¯åœ¨æˆ‘çœ‹æ¥è¿™ä¸ªä»»åŠ¡ååˆ†ç®€å•ï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨ Flask æ‰©å±•ã€‚</p>\n\n<p>æˆ‘ä»¬ web service çš„å®¢æˆ·ç«¯éœ€è¦æ·»åŠ ã€åˆ é™¤ä»¥åŠä¿®æ”¹ä»»åŠ¡çš„æœåŠ¡ï¼Œå› æ­¤æ˜¾ç„¶æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥å­˜å‚¨ä»»åŠ¡ã€‚æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯å»ºç«‹ä¸€ä¸ªå°å‹çš„æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“å¹¶ä¸æ˜¯æœ¬æ–‡çš„ä¸»ä½“ã€‚å­¦ä¹ åœ¨ Flask ä¸­ä½¿ç”¨åˆé€‚çš„æ•°æ®åº“ï¼Œæˆ‘å¼ºçƒˆå»ºè®®é˜…è¯»&nbsp;<a href=\"http://www.pythondoc.com/flask-mega-tutorial/index.html\">Mega-Tutorial</a>ã€‚</p>\n\n<p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥æŠŠä»»åŠ¡åˆ—è¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤è¿™äº›ä»»åŠ¡åˆ—è¡¨åªä¼šåœ¨ web æœåŠ¡å™¨è¿è¡Œä¸­å·¥ä½œï¼Œåœ¨ç»“æŸçš„æ—¶å€™å°±å¤±æ•ˆã€‚ è¿™ç§æ–¹å¼åªæ˜¯é€‚ç”¨æˆ‘ä»¬è‡ªå·±å¼€å‘çš„ web æœåŠ¡å™¨ï¼Œä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ web æœåŠ¡å™¨ï¼Œ è¿™ç§æƒ…å†µä¸€ä¸ªåˆé€‚çš„æ•°æ®åº“çš„æ­å»ºæ˜¯å¿…é¡»çš„ã€‚</p>\n\n<p>æˆ‘ä»¬ç°åœ¨æ¥å®ç° web service çš„ç¬¬ä¸€ä¸ªå…¥å£:</p>\n\n<pre>\n<code>#!flask/bin/python\nfrom flask import Flask, jsonify\n\napp = Flask(__name__)\n\ntasks = [\n    {\n        \'id\': 1,\n        \'title\': u\'Buy groceries\',\n        \'description\': u\'Milk, Cheese, Pizza, Fruit, Tylenol\',\n        \'done\': False\n    },\n    {\n        \'id\': 2,\n        \'title\': u\'Learn Python\',\n        \'description\': u\'Need to find a good Python tutorial on the web\',\n        \'done\': False\n    }\n]\n\n@app.route(\'/todo/api/v1.0/tasks\', methods=[\'GET\'])\ndef get_tasks():\n    return jsonify({\'tasks\': tasks})\n\nif __name__ == \'__main__\':\n    app.run(debug=True)</code></pre>\n\n<p>æ­£å¦‚ä½ æ‰€è§ï¼Œæ²¡æœ‰å¤šå¤§çš„å˜åŒ–ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä»»åŠ¡çš„å†…å­˜æ•°æ®åº“ï¼Œè¿™é‡Œæ— éå°±æ˜¯ä¸€ä¸ªå­—å…¸å’Œæ•°ç»„ã€‚æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å…·æœ‰ä¸Šè¿°å®šä¹‰çš„ä»»åŠ¡çš„å±æ€§ã€‚</p>\n\n<p>å–ä»£äº†é¦–é¡µï¼Œæˆ‘ä»¬ç°åœ¨æ‹¥æœ‰ä¸€ä¸ª get_tasks çš„å‡½æ•°ï¼Œè®¿é—®çš„ URI ä¸º /todo/api/v1.0/tasksï¼Œå¹¶ä¸”åªå…è®¸ GET çš„ HTTP æ–¹æ³•ã€‚</p>\n\n<p>è¿™ä¸ªå‡½æ•°çš„å“åº”ä¸æ˜¯æ–‡æœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ JSON æ•°æ®æ ¼å¼æ¥å“åº”ï¼ŒFlask çš„ jsonify å‡½æ•°ä»æˆ‘ä»¬çš„æ•°æ®ç»“æ„ä¸­ç”Ÿæˆã€‚</p>\n\n<p>ä½¿ç”¨ç½‘é¡µæµè§ˆå™¨æ¥æµ‹è¯•æˆ‘ä»¬çš„ web service ä¸æ˜¯ä¸€ä¸ªæœ€å¥½çš„æ³¨æ„ï¼Œå› ä¸ºç½‘é¡µæµè§ˆå™¨ä¸Šä¸èƒ½è½»æ˜“åœ°æ¨¡æ‹Ÿæ‰€æœ‰çš„ HTTP è¯·æ±‚çš„æ–¹æ³•ã€‚ç›¸åï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ curlã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… curl çš„è¯ï¼Œè¯·ç«‹å³å®‰è£…å®ƒã€‚</p>\n\n<p>é€šè¿‡æ‰§è¡Œ app.pyï¼Œå¯åŠ¨ web serviceã€‚æ¥ç€æ‰“å¼€ä¸€ä¸ªæ–°çš„æ§åˆ¶å°çª—å£ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 294\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 04:53:53 GMT\n\n{\n  \"tasks\": [\n    {\n      \"description\": \"Milk, Cheese, Pizza, Fruit, Tylenol\",\n      \"done\": false,\n      \"id\": 1,\n      \"title\": \"Buy groceries\"\n    },\n    {\n      \"description\": \"Need to find a good Python tutorial on the web\",\n      \"done\": false,\n      \"id\": 2,\n      \"title\": \"Learn Python\"\n    }\n  ]\n}\n</code></pre>\n\n<pre>\næˆ‘ä»¬å·²ç»æˆåŠŸåœ°è°ƒç”¨æˆ‘ä»¬çš„ RESTful service çš„ä¸€ä¸ªå‡½æ•°ï¼</pre>\n\n<p>ç°åœ¨æˆ‘ä»¬å¼€å§‹ç¼–å†™ GET æ–¹æ³•è¯·æ±‚æˆ‘ä»¬çš„ä»»åŠ¡èµ„æºçš„ç¬¬äºŒä¸ªç‰ˆæœ¬ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨æ¥è¿”å›å•ç‹¬ä¸€ä¸ªä»»åŠ¡çš„å‡½æ•°:</p>\n\n<pre>\n<code>from flask import abort\n\n@app.route(\'/todo/api/v1.0/tasks/&lt;int:task_id&gt;\', methods=[\'GET\'])\ndef get_task(task_id):\n    task = filter(lambda t: t[\'id\'] == task_id, tasks)\n    if len(task) == 0:\n        abort(404)\n    return jsonify({\'task\': task[0]})</code></pre>\n\n<p>ç¬¬äºŒä¸ªå‡½æ•°æœ‰äº›æ„æ€ã€‚è¿™é‡Œæˆ‘ä»¬å¾—åˆ°äº† URL ä¸­ä»»åŠ¡çš„ idï¼Œæ¥ç€ Flask æŠŠå®ƒè½¬æ¢æˆ å‡½æ•°ä¸­çš„ task_id çš„å‚æ•°ã€‚</p>\n\n<p>æˆ‘ä»¬ç”¨è¿™ä¸ªå‚æ•°æ¥æœç´¢æˆ‘ä»¬çš„ä»»åŠ¡æ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬çš„æ•°æ®åº“ä¸­ä¸å­˜åœ¨æœç´¢çš„ idï¼Œæˆ‘ä»¬å°†ä¼šè¿”å›ä¸€ä¸ªç±»ä¼¼ 404 çš„é”™è¯¯ï¼Œæ ¹æ® HTTP è§„èŒƒçš„æ„æ€æ˜¯ &ldquo;èµ„æºæœªæ‰¾åˆ°&rdquo;ã€‚</p>\n\n<p>å¦‚æœæˆ‘ä»¬æ‰¾åˆ°ç›¸åº”çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€å°†å®ƒç”¨ jsonify æ‰“åŒ…æˆ JSON æ ¼å¼å¹¶å°†å…¶å‘é€ä½œä¸ºå“åº”ï¼Œå°±åƒæˆ‘ä»¬ä»¥å‰é‚£æ ·å¤„ç†æ•´ä¸ªä»»åŠ¡é›†åˆã€‚</p>\n\n<p>è°ƒç”¨ curl è¯·æ±‚çš„ç»“æœå¦‚ä¸‹:</p>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks/2\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 151\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 05:21:50 GMT\n\n{\n  \"task\": {\n    \"description\": \"Need to find a good Python tutorial on the web\",\n    \"done\": false,\n    \"id\": 2,\n    \"title\": \"Learn Python\"\n  }\n}\n$ curl -i http://localhost:5000/todo/api/v1.0/tasks/3\nHTTP/1.0 404 NOT FOUND\nContent-Type: text/html\nContent-Length: 238\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 05:21:52 GMT\n\n&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\"&gt;\n&lt;title&gt;404 Not Found&lt;/title&gt;\n&lt;h1&gt;Not Found&lt;/h1&gt;\n&lt;p&gt;The requested URL was not found on the server.&lt;/p&gt;&lt;p&gt;If you     entered the URL manually please check your spelling and try again.&lt;/p&gt;</code></pre>\n\n<p>å½“æˆ‘ä»¬è¯·æ±‚ id #2 çš„èµ„æºæ—¶å€™ï¼Œæˆ‘ä»¬è·å–åˆ°äº†ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è¯·æ±‚ #3 çš„æ—¶å€™è¿”å›äº† 404 é”™è¯¯ã€‚æœ‰å…³é”™è¯¯å¥‡æ€ªçš„æ˜¯è¿”å›çš„æ˜¯ HTML ä¿¡æ¯è€Œä¸æ˜¯ JSONï¼Œè¿™æ˜¯å› ä¸º Flask æŒ‰ç…§é»˜è®¤æ–¹å¼ç”Ÿæˆ 404 å“åº”ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ª Web service å®¢æˆ·ç«¯å¸Œæœ›æˆ‘ä»¬æ€»æ˜¯ä»¥ JSON æ ¼å¼å›åº”ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ”¹å–„æˆ‘ä»¬çš„ 404 é”™è¯¯å¤„ç†ç¨‹åº:</p>\n\n<pre>\n<code>from flask import make_response\n\n@app.errorhandler(404)\ndef not_found(error):\n    return make_response(jsonify({\'error\': \'Not found\'}), 404)\n</code></pre>\n\n<pre>\næˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå‹å¥½çš„é”™è¯¯æç¤º:</pre>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks/3\nHTTP/1.0 404 NOT FOUND\nContent-Type: application/json\nContent-Length: 26\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 05:36:54 GMT\n\n{\n  \"error\": \"Not found\"\n}</code></pre>\n\n<p>æ¥ä¸‹æ¥å°±æ˜¯ POST æ–¹æ³•ï¼Œæˆ‘ä»¬ç”¨æ¥åœ¨æˆ‘ä»¬çš„ä»»åŠ¡æ•°æ®åº“ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„ä»»åŠ¡:</p>\n\n<pre>\n<code>from flask import request\n\n@app.route(\'/todo/api/v1.0/tasks\', methods=[\'POST\'])\ndef create_task():\n    if not request.json or not \'title\' in request.json:\n        abort(400)\n    task = {\n        \'id\': tasks[-1][\'id\'] + 1,\n        \'title\': request.json[\'title\'],\n        \'description\': request.json.get(\'description\', \"\"),\n        \'done\': False\n    }\n    tasks.append(task)\n    return jsonify({\'task\': task}), 201</code></pre>\n\n<p>æ·»åŠ ä¸€ä¸ªæ–°çš„ä»»åŠ¡ä¹Ÿæ˜¯ç›¸å½“å®¹æ˜“åœ°ã€‚åªæœ‰å½“è¯·æ±‚ä»¥ JSON æ ¼å¼å½¢å¼ï¼Œrequest.json æ‰ä¼šæœ‰è¯·æ±‚çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œæˆ–è€…å­˜åœ¨æ•°æ®ä½†æ˜¯ç¼ºå°‘ title é¡¹ï¼Œæˆ‘ä»¬å°†ä¼šè¿”å› 400ï¼Œè¿™æ˜¯è¡¨ç¤ºè¯·æ±‚æ— æ•ˆã€‚</p>\n\n<p>æ¥ç€æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡å­—å…¸ï¼Œä½¿ç”¨æœ€åä¸€ä¸ªä»»åŠ¡çš„ id + 1 ä½œä¸ºè¯¥ä»»åŠ¡çš„ idã€‚æˆ‘ä»¬å…è®¸ description å­—æ®µç¼ºå¤±ï¼Œå¹¶ä¸”å‡è®¾ done å­—æ®µè®¾ç½®æˆ Falseã€‚</p>\n\n<p>æˆ‘ä»¬æŠŠæ–°çš„ä»»åŠ¡æ·»åŠ åˆ°æˆ‘ä»¬çš„ä»»åŠ¡æ•°ç»„ä¸­ï¼Œå¹¶ä¸”æŠŠæ–°æ·»åŠ çš„ä»»åŠ¡å’ŒçŠ¶æ€ 201 å“åº”ç»™å®¢æˆ·ç«¯ã€‚</p>\n\n<p>ä½¿ç”¨å¦‚ä¸‹çš„ curl å‘½ä»¤æ¥æµ‹è¯•è¿™ä¸ªæ–°çš„å‡½æ•°:</p>\n\n<pre>\n<code>$ curl -i -H \"Content-Type: application/json\" -X POST -d \'{\"title\":\"Read a book\"}\' http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 201 Created\nContent-Type: application/json\nContent-Length: 104\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 05:56:21 GMT\n\n{\n  \"task\": {\n    \"description\": \"\",\n    \"done\": false,\n    \"id\": 3,\n    \"title\": \"Read a book\"\n  }\n}</code></pre>\n\n<p>æ³¨æ„ï¼šå¦‚æœä½ åœ¨ Windows ä¸Šå¹¶ä¸”è¿è¡Œ Cygwin ç‰ˆæœ¬çš„ curlï¼Œä¸Šé¢çš„å‘½ä»¤ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨åŸç”Ÿçš„ curlï¼Œå‘½ä»¤ä¼šæœ‰äº›ä¸åŒ:</p>\n\n<pre>\n<code>curl -i -H \"Content-Type: application/json\" -X POST -d \"{\"\"\"title\"\"\":\"\"\"Read a book\"\"\"}\" http://localhost:5000/todo/api/v1.0/tasks</code></pre>\n\n<p>å½“ç„¶åœ¨å®Œæˆè¿™ä¸ªè¯·æ±‚åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»»åŠ¡çš„æ›´æ–°åˆ—è¡¨:</p>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 423\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 05:57:44 GMT\n\n{\n  \"tasks\": [\n    {\n      \"description\": \"Milk, Cheese, Pizza, Fruit, Tylenol\",\n      \"done\": false,\n      \"id\": 1,\n      \"title\": \"Buy groceries\"\n    },\n    {\n      \"description\": \"Need to find a good Python tutorial on the web\",\n      \"done\": false,\n      \"id\": 2,\n      \"title\": \"Learn Python\"\n    },\n    {\n      \"description\": \"\",\n      \"done\": false,\n      \"id\": 3,\n      \"title\": \"Read a book\"\n    }\n  ]\n}</code></pre>\n\n<p>å‰©ä¸‹çš„ä¸¤ä¸ªå‡½æ•°å¦‚ä¸‹æ‰€ç¤º:</p>\n\n<pre>\n<code>@app.route(\'/todo/api/v1.0/tasks/&lt;int:task_id&gt;\', methods=[\'PUT\'])\ndef update_task(task_id):\n    task = filter(lambda t: t[\'id\'] == task_id, tasks)\n    if len(task) == 0:\n        abort(404)\n    if not request.json:\n        abort(400)\n    if \'title\' in request.json and type(request.json[\'title\']) != unicode:\n        abort(400)\n    if \'description\' in request.json and type(request.json[\'description\']) is not unicode:\n        abort(400)\n    if \'done\' in request.json and type(request.json[\'done\']) is not bool:\n        abort(400)\n    task[0][\'title\'] = request.json.get(\'title\', task[0][\'title\'])\n    task[0][\'description\'] = request.json.get(\'description\', task[0][\'description\'])\n    task[0][\'done\'] = request.json.get(\'done\', task[0][\'done\'])\n    return jsonify({\'task\': task[0]})\n\n@app.route(\'/todo/api/v1.0/tasks/&lt;int:task_id&gt;\', methods=[\'DELETE\'])\ndef delete_task(task_id):\n    task = filter(lambda t: t[\'id\'] == task_id, tasks)\n    if len(task) == 0:\n        abort(404)\n    tasks.remove(task[0])\n    return jsonify({\'result\': True})</code></pre>\n\n<p>delete_task å‡½æ•°æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚å¯¹äº update_task å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä¸¥æ ¼åœ°æ£€æŸ¥è¾“å…¥çš„å‚æ•°ä»¥é˜²æ­¢å¯èƒ½çš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æˆ‘ä»¬æŠŠå®ƒæ›´æ–°åˆ°æ•°æ®åº“ä¹‹å‰ï¼Œä»»ä½•å®¢æˆ·ç«¯æä¾›æˆ‘ä»¬çš„æ˜¯é¢„æœŸçš„æ ¼å¼ã€‚</p>\n\n<p>æ›´æ–°ä»»åŠ¡ #2 çš„å‡½æ•°è°ƒç”¨å¦‚ä¸‹æ‰€ç¤º:</p>\n\n<pre>\n<code>$ curl -i -H \"Content-Type: application/json\" -X PUT -d \'{\"done\":true}\' http://localhost:5000/todo/api/v1.0/tasks/2\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 170\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 07:10:16 GMT\n\n{\n  \"task\": [\n    {\n      \"description\": \"Need to find a good Python tutorial on the web\",\n      \"done\": true,\n      \"id\": 2,\n      \"title\": \"Learn Python\"\n    }\n  ]\n}</code></pre>\n\n<h2>ä¼˜åŒ– web service æ¥å£</h2>\n\n<p>ç›®å‰ API çš„è®¾è®¡çš„é—®é¢˜å°±æ˜¯è¿«ä½¿å®¢æˆ·ç«¯åœ¨ä»»åŠ¡æ ‡è¯†è¿”å›åå»æ„é€  URIsã€‚è¿™å¯¹äºæœåŠ¡å™¨æ˜¯ååˆ†ç®€å•çš„ï¼Œä½†æ˜¯é—´æ¥åœ°è¿«ä½¿å®¢æˆ·ç«¯çŸ¥é“è¿™äº› URIs æ˜¯å¦‚ä½•æ„é€ çš„ï¼Œè¿™å°†ä¼šé˜»ç¢æˆ‘ä»¬ä»¥åå˜æ›´è¿™äº› URIsã€‚</p>\n\n<p>ä¸ç›´æ¥è¿”å›ä»»åŠ¡çš„ idsï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›æ§åˆ¶è¿™äº›ä»»åŠ¡çš„å®Œæ•´çš„ URIï¼Œä»¥ä¾¿å®¢æˆ·ç«¯å¯ä»¥éšæ—¶ä½¿ç”¨è¿™äº› URIsã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå°çš„è¾…åŠ©å‡½æ•°ç”Ÿæˆä¸€ä¸ª &ldquo;å…¬å…±&rdquo; ç‰ˆæœ¬ä»»åŠ¡å‘é€åˆ°å®¢æˆ·ç«¯:</p>\n\n<pre>\n<code>from flask import url_for\n\ndef make_public_task(task):\n    new_task = {}\n    for field in task:\n        if field == \'id\':\n            new_task[\'uri\'] = url_for(\'get_task\', task_id=task[\'id\'], _external=True)\n        else:\n            new_task[field] = task[field]\n    return new_task</code></pre>\n\n<p>è¿™é‡Œæ‰€æœ‰åšçš„äº‹æƒ…å°±æ˜¯ä»æˆ‘ä»¬æ•°æ®åº“ä¸­å–å‡ºä»»åŠ¡å¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡çš„ id å­—æ®µè¢«æ›¿æ¢æˆé€šè¿‡ Flask çš„ url_for ç”Ÿæˆçš„ uri å­—æ®µã€‚</p>\n\n<p>å½“æˆ‘ä»¬è¿”å›æ‰€æœ‰çš„ä»»åŠ¡åˆ—è¡¨çš„æ—¶å€™ï¼Œåœ¨å‘é€åˆ°å®¢æˆ·ç«¯ä¹‹å‰é€šè¿‡è¿™ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†:</p>\n\n<pre>\n<code>@app.route(\'/todo/api/v1.0/tasks\', methods=[\'GET\'])\ndef get_tasks():\n    return jsonify({\'tasks\': map(make_public_task, tasks)})</code></pre>\n\n<p>è¿™é‡Œå°±æ˜¯å®¢æˆ·ç«¯è·å–ä»»åŠ¡åˆ—è¡¨çš„æ—¶å€™å¾—åˆ°çš„æ•°æ®:</p>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 406\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 18:16:28 GMT\n\n{\n  \"tasks\": [\n    {\n      \"title\": \"Buy groceries\",\n      \"done\": false,\n      \"description\": \"Milk, Cheese, Pizza, Fruit, Tylenol\",\n      \"uri\": \"http://localhost:5000/todo/api/v1.0/tasks/1\"\n    },\n    {\n      \"title\": \"Learn Python\",\n      \"done\": false,\n      \"description\": \"Need to find a good Python tutorial on the web\",\n      \"uri\": \"http://localhost:5000/todo/api/v1.0/tasks/2\"\n    }\n  ]\n}\n</code></pre>\n\n<pre>\næˆ‘ä»¬å°†ä¼šæŠŠä¸Šè¿°çš„æ–¹å¼åº”ç”¨åˆ°å…¶å®ƒæ‰€æœ‰çš„å‡½æ•°ä¸Šä»¥ç¡®ä¿å®¢æˆ·ç«¯ä¸€ç›´çœ‹åˆ° URIs è€Œä¸æ˜¯ idsã€‚</pre>\n\n<h2>åŠ å¼º RESTful web service çš„å®‰å…¨æ€§</h2>\n\n<p>æˆ‘ä»¬å·²ç»å®Œæˆäº†æˆ‘ä»¬ web service çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬çš„ web service å¯¹ä»»ä½•äººéƒ½æ˜¯å…¬å¼€çš„ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p>\n\n<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ä»¥ç®¡ç†æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹å®Œæ•´çš„ web serviceï¼Œä½†åœ¨å½“å‰çŠ¶æ€ä¸‹çš„ web service æ˜¯å¼€æ”¾ç»™æ‰€æœ‰çš„å®¢æˆ·ç«¯ã€‚ å¦‚æœä¸€ä¸ªé™Œç”Ÿäººå¼„æ¸…æˆ‘ä»¬çš„ API æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»–æˆ–å¥¹å¯ä»¥ç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯è®¿é—®æˆ‘ä»¬çš„ web service å¹¶ä¸”æ¯åæˆ‘ä»¬çš„æ•°æ®ã€‚</p>\n\n<p>å¤§éƒ¨åˆ†åˆçº§çš„æ•™ç¨‹ä¼šå¿½ç•¥è¿™ä¸ªé—®é¢˜å¹¶ä¸”åˆ°æ­¤ä¸ºæ­¢ã€‚åœ¨æˆ‘çœ‹æ¥è¿™æ˜¯ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œæˆ‘å¿…é¡»æŒ‡å‡ºã€‚</p>\n\n<p>ç¡®ä¿æˆ‘ä»¬çš„ web service å®‰å…¨æœåŠ¡çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯è¦æ±‚å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ã€‚åœ¨å¸¸è§„çš„ web åº”ç”¨ç¨‹åºä¼šæä¾›ä¸€ä¸ªç™»å½•çš„è¡¨å•ç”¨æ¥è®¤è¯ï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªä¼šè¯ä¸ºç™»å½•çš„ç”¨æˆ·ä»¥åçš„æ“ä½œä½¿ç”¨ï¼Œä¼šè¯çš„ id ä»¥ cookie å½¢å¼å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ã€‚ç„¶è€Œ REST çš„è§„åˆ™ä¹‹ä¸€å°±æ˜¯ &ldquo;æ— çŠ¶æ€&rdquo;ï¼Œ å› æ­¤æˆ‘ä»¬å¿…é¡»è¦æ±‚å®¢æˆ·ç«¯åœ¨æ¯ä¸€æ¬¡è¯·æ±‚ä¸­æä¾›è®¤è¯çš„ä¿¡æ¯ã€‚</p>\n\n<p>æˆ‘ä»¬ä¸€ç›´è¯•ç€å°½å¯èƒ½åœ°åšæŒ HTTP æ ‡å‡†åè®®ã€‚æ—¢ç„¶æˆ‘ä»¬éœ€è¦å®ç°è®¤è¯æˆ‘ä»¬éœ€è¦åœ¨ HTTP ä¸Šä¸‹æ–‡ä¸­å»å®Œæˆï¼ŒHTTP åè®®æä¾›äº†ä¸¤ç§è®¤è¯æœºåˆ¶:&nbsp;<a href=\"http://www.ietf.org/rfc/rfc2617.txt\">Basic å’Œ Digest</a>ã€‚</p>\n\n<p>æœ‰ä¸€ä¸ªå°çš„ Flask æ‰©å±•èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå®‰è£… Flask-HTTPAuth:</p>\n\n<pre>\n<code>$ flask/bin/pip install flask-httpauth</code></pre>\n\n<p>æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ web service åªè®©è®¿é—®ç”¨æˆ·å miguel å’Œå¯†ç  python çš„å®¢æˆ·ç«¯è®¿é—®ã€‚ æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªåŸºæœ¬çš„ HTTP éªŒè¯å¦‚ä¸‹:</p>\n\n<pre>\n<code>from flask.ext.httpauth import HTTPBasicAuth\nauth = HTTPBasicAuth()\n\n@auth.get_password\ndef get_password(username):\n    if username == \'miguel\':\n        return \'python\'\n    return None\n\n@auth.error_handler\ndef unauthorized():\n    return make_response(jsonify({\'error\': \'Unauthorized access\'}), 401)</code></pre>\n\n<p>get_password å‡½æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ŒFlask-HTTPAuth ä½¿ç”¨å®ƒæ¥è·å–ç»™å®šç”¨æˆ·çš„å¯†ç ã€‚åœ¨ä¸€ä¸ªæ›´å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯éœ€è¦æ£€æŸ¥ä¸€ä¸ªç”¨æˆ·æ•°æ®åº“ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­åªæœ‰å•ä¸€çš„ç”¨æˆ·å› æ­¤æ²¡æœ‰å¿…è¦ã€‚</p>\n\n<p>error_handler å›è°ƒå‡½æ•°æ˜¯ç”¨äºç»™å®¢æˆ·ç«¯å‘é€æœªæˆæƒé”™è¯¯ä»£ç ã€‚åƒæˆ‘ä»¬å¤„ç†å…¶å®ƒçš„é”™è¯¯ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬å®šåˆ¶ä¸€ä¸ªåŒ…å« JSON æ•°æ®æ ¼å¼è€Œä¸æ˜¯ HTML çš„å“åº”ã€‚</p>\n\n<p>éšç€è®¤è¯ç³»ç»Ÿçš„å»ºç«‹ï¼Œæ‰€å‰©ä¸‹çš„å°±æ˜¯æŠŠéœ€è¦è®¤è¯çš„å‡½æ•°æ·»åŠ  @auth.login_required è£…é¥°å™¨ã€‚ä¾‹å¦‚:</p>\n\n<pre>\n<code>@app.route(\'/todo/api/v1.0/tasks\', methods=[\'GET\'])\n@auth.login_required\ndef get_tasks():\n    return jsonify({\'tasks\': tasks})</code></pre>\n\n<p>å¦‚æœç°åœ¨è¦å°è¯•ä½¿ç”¨ curl è°ƒç”¨è¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¼šå¾—åˆ°:</p>\n\n<pre>\n<code>$ curl -i http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 401 UNAUTHORIZED\nContent-Type: application/json\nContent-Length: 36\nWWW-Authenticate: Basic realm=\"Authentication Required\"\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 06:41:14 GMT\n\n{\n  \"error\": \"Unauthorized access\"\n}</code></pre>\n\n<p>ä¸ºäº†èƒ½å¤Ÿè°ƒç”¨è¿™ä¸ªå‡½æ•°æˆ‘ä»¬å¿…é¡»å‘é€æˆ‘ä»¬çš„è®¤è¯å‡­æ®:</p>\n\n<pre>\n<code>$ curl -u miguel:python -i http://localhost:5000/todo/api/v1.0/tasks\nHTTP/1.0 200 OK\nContent-Type: application/json\nContent-Length: 316\nServer: Werkzeug/0.8.3 Python/2.7.3\nDate: Mon, 20 May 2013 06:46:45 GMT\n\n{\n  \"tasks\": [\n    {\n      \"title\": \"Buy groceries\",\n      \"done\": false,\n      \"description\": \"Milk, Cheese, Pizza, Fruit, Tylenol\",\n      \"uri\": \"http://localhost:5000/todo/api/v1.0/tasks/1\"\n    },\n    {\n      \"title\": \"Learn Python\",\n      \"done\": false,\n      \"description\": \"Need to find a good Python tutorial on the web\",\n      \"uri\": \"http://localhost:5000/todo/api/v1.0/tasks/2\"\n    }\n  ]\n}</code></pre>\n\n<p>è®¤è¯æ‰©å±•ç»™äºˆæˆ‘ä»¬å¾ˆå¤§çš„è‡ªç”±é€‰æ‹©å“ªäº›å‡½æ•°éœ€è¦ä¿æŠ¤ï¼Œå“ªäº›å‡½æ•°éœ€è¦å…¬å¼€ã€‚</p>\n\n<p>ä¸ºäº†ç¡®ä¿ç™»å½•ä¿¡æ¯çš„å®‰å…¨åº”è¯¥ä½¿ç”¨ HTTP å®‰å…¨æœåŠ¡å™¨(ä¾‹å¦‚:&nbsp;<a href=\"https:\">https://</a>...)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡éƒ½æ˜¯åŠ å¯†çš„ï¼Œä»¥é˜²æ­¢ä¼ è¾“è¿‡ç¨‹ä¸­ç¬¬ä¸‰æ–¹çœ‹åˆ°è®¤è¯çš„å‡­æ®ã€‚</p>\n\n<p>è®©äººä¸èˆ’æœçš„æ˜¯å½“è¯·æ±‚æ”¶åˆ°ä¸€ä¸ª 401 çš„é”™è¯¯ï¼Œç½‘é¡µæµè§ˆéƒ½ä¼šè·³å‡ºä¸€ä¸ªä¸‘é™‹çš„ç™»å½•æ¡†ï¼Œå³ä½¿è¯·æ±‚æ˜¯åœ¨åå°å‘ç”Ÿçš„ã€‚å› æ­¤å¦‚æœæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªå®Œç¾çš„ web æœåŠ¡å™¨çš„è¯ï¼Œæˆ‘ä»¬å°±éœ€è¦ç¦æ­¢è·³è½¬åˆ°æµè§ˆå™¨æ˜¾ç¤ºèº«ä»½éªŒè¯å¯¹è¯æ¡†ï¼Œè®©æˆ‘ä»¬çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè‡ªå·±å¤„ç†ç™»å½•ã€‚</p>\n\n<p>ä¸€ä¸ªç®€å•çš„æ–¹å¼å°±æ˜¯ä¸è¿”å› 401 é”™è¯¯ã€‚403 é”™è¯¯æ˜¯ä¸€ä¸ªä»¤äººé’ççš„æ›¿ä»£ï¼Œ403 é”™è¯¯è¡¨ç¤º &ldquo;ç¦æ­¢&rdquo; çš„é”™è¯¯:</p>\n\n<pre>\n<code>@auth.error_handler\ndef unauthorized():\n    return make_response(jsonify({\'error\': \'Unauthorized access\'}), 403)</code></pre>\n\n<h2>å¯èƒ½çš„æ”¹è¿›</h2>\n\n<p>æˆ‘ä»¬ç¼–å†™çš„å°å‹çš„ web service è¿˜å¯ä»¥åœ¨ä¸å°‘çš„æ–¹é¢è¿›è¡Œæ”¹è¿›ã€‚</p>\n\n<p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œä¸€ä¸ªçœŸæ­£çš„ web service éœ€è¦ä¸€ä¸ªçœŸå®çš„æ•°æ®åº“è¿›è¡Œæ”¯æ’‘ã€‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„å†…å­˜æ•°æ®ç»“æ„ä¼šæœ‰å¾ˆå¤šé™åˆ¶ä¸åº”è¯¥è¢«ç”¨äºçœŸæ­£çš„åº”ç”¨ã€‚</p>\n\n<p>å¦å¤–ä¸€ä¸ªå¯ä»¥æé«˜çš„é¢†åŸŸå°±æ˜¯å¤„ç†å¤šç”¨æˆ·ã€‚å¦‚æœç³»ç»Ÿæ”¯æŒå¤šç”¨æˆ·çš„è¯ï¼Œä¸åŒçš„å®¢æˆ·ç«¯å¯ä»¥å‘é€ä¸åŒçš„è®¤è¯å‡­è¯è·å–ç›¸åº”ç”¨æˆ·çš„ä»»åŠ¡åˆ—è¡¨ã€‚åœ¨è¿™æ ·ä¸€ä¸ªç³»ç»Ÿä¸­çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç¬¬äºŒä¸ªèµ„æºå°±æ˜¯ç”¨æˆ·ã€‚åœ¨ç”¨æˆ·èµ„æºä¸Šçš„ POST çš„è¯·æ±‚ä»£è¡¨æ³¨å†Œæ¢ä¸€ä¸ªæ–°ç”¨æˆ·ã€‚ä¸€ä¸ª GET è¯·æ±‚è¡¨ç¤ºå®¢æˆ·ç«¯è·å–ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯ã€‚ä¸€ä¸ª PUT è¯·æ±‚è¡¨ç¤ºæ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚å¯èƒ½æ˜¯æ›´æ–°é‚®ç®±åœ°å€ã€‚ä¸€ä¸ª DELETE è¯·æ±‚è¡¨ç¤ºåˆ é™¤ç”¨æˆ·è´¦å·ã€‚</p>\n\n<p>GET æ£€ç´¢ä»»åŠ¡åˆ—è¡¨è¯·æ±‚å¯ä»¥åœ¨å‡ ä¸ªæ–¹é¢è¿›è¡Œæ‰©å±•ã€‚é¦–å…ˆå¯ä»¥æºå¸¦ä¸€ä¸ªå¯é€‰çš„é¡µçš„å‚æ•°ï¼Œä»¥ä¾¿å®¢æˆ·ç«¯è¯·æ±‚ä»»åŠ¡çš„ä¸€éƒ¨åˆ†ã€‚å¦å¤–ï¼Œè¿™ç§æ‰©å±•æ›´åŠ æœ‰ç”¨ï¼šå…è®¸æŒ‰ç…§ä¸€å®šçš„æ ‡å‡†ç­›é€‰ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·åªæƒ³è¦çœ‹åˆ°å®Œæˆçš„ä»»åŠ¡ï¼Œæˆ–è€…åªæƒ³çœ‹åˆ°ä»»åŠ¡çš„æ ‡é¢˜ä»¥ A å­—æ¯å¼€å¤´ã€‚æ‰€æœ‰çš„è¿™äº›éƒ½å¯ä»¥ä½œä¸º URL çš„ä¸€ä¸ªå‚æ•°é¡¹ã€‚</p>\n',12,'http://blog.xiaosankexing.com/FpqBoRmFB_JEEB1nMSaUas8K-v2b',4,0,0),('2018-10-03 21:54:04','2018-10-03 23:13:00',15,'å…³äºflask requestç•™è¨€è·å–ç”¨æˆ·çœŸå®ip','æ£‹å­ã€‚','éƒ¨ç½²å®Œç¨‹åºåˆ°æœåŠ¡å™¨åå‘ç°ï¼Œæ¯æ¬¡ç•™è¨€è·å–åˆ°çš„ç”¨æˆ·ipéƒ½æ˜¯127.0.0.1','<p>éƒ¨ç½²å®Œç¨‹åºåˆ°æœåŠ¡å™¨åå‘ç°ï¼Œæ¯æ¬¡ç•™è¨€è·å–åˆ°çš„ç”¨æˆ·ipéƒ½æ˜¯127.0.0.1</p>\n\n<p>&nbsp;</p>\n\n<p>æƒ³äº†æƒ³ï¼Œå› ä¸ºæ˜¯ç”¨nginxåšçš„ç«¯å£è½¬å‘ï¼Œæ‰€ä»¥ç”¨æˆ·æ˜¯è®¿é—®åˆ°nginxçš„80ç«¯å£</p>\n\n<p>&nbsp;</p>\n\n<p>ç„¶åç”±æœ¬åœ°nginxè½¬å‘åˆ°ç¨‹åºè¿è¡Œçš„5000ç«¯å£</p>\n\n<p>&nbsp;</p>\n\n<p>è¿™æ ·ä¸€æ¥request.remote_addrè·å–åˆ°è‚¯å®šå°±æ˜¯127.0.0.1äº†</p>\n\n<p>&nbsp;</p>\n\n<p>ä¿®æ”¹nginxé…ç½®</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>proxy_set_header Host $host:80; \nproxy_set_header X-Real-IP $remote_addr; \nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </code></pre>\n\n<p>&nbsp;</p>\n\n<p>ç„¶åé€šè¿‡</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>ip=request.headers[\'X-Real-IP\'] \n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>å°±å¯ä»¥è·å–çœŸå® ipäº†</p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"\" src=\"/static/upload/201810032153433324.png\" /></p>\n',11,'http://blog.xiaosankexing.com/FpqBoRmFB_JEEB1nMSaUas8K-v2b',4,0,0),('2018-10-04 01:35:02','2018-10-04 02:29:55',16,'å…³äºFlask-SQLAlchemyå¯¹å…³è”æ•°æ®è¡¨æ¸…é™¤','æ£‹å­ã€‚','å…³äºFlask-SQLAlchemyå¯¹å…³è”æ•°æ®è¡¨æ¸…é™¤','<p>ä¸€å¯¹å¤šå…³ç³»ï¼ŒUserä¸ºä¸€ï¼ŒTaskä¸ºå¤šã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>ä¸€çš„ä¸€æ–¹é€šè¿‡relationshipå…³è”åˆ°å¤šçš„ä¸€æ–¹ï¼Œå¤šçš„ä¸€æ–¹è®¾ç½®ForeignKeyå…³è”åˆ°ä¸€çš„ä¸€æ–¹ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>relationshipä¸­è®¾ç½®cascade=&#39;all, delete-orphan&#39; ä¸ passive_deletes = Trueï¼Œ</p>\n\n<p>&nbsp;</p>\n\n<p>ForeignKeyä¸­è®¾ç½®ondelete = &#39;CASCADE&#39;ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>å³å¯å®Œæˆåˆ é™¤Userçš„åŒæ—¶ï¼Œåˆ é™¤ä¸è¯¥userå¯¹è±¡ç›¸å…³çš„taskå¯¹è±¡ã€‚</p>\n\n<p>&nbsp;</p>\n\n<p>ä¾‹å¦‚ï¼š</p>\n\n<p>&nbsp;</p>\n\n<p>userçš„idä¸º1ï¼ŒåŒæ—¶ä»»åŠ¡åˆ—è¡¨ä¸­ï¼Œä»»åŠ¡idä¸º1å’Œ2çš„ä¸¤ä¸ªä»»åŠ¡çš„user_idä¸º1ï¼Œå³userä¸­idä¸º1çš„ç”¨æˆ·æ‹¥æœ‰ä»»åŠ¡idä¸º1å’Œ2çš„ä¸¤ä¸ªä»»åŠ¡ã€‚é€šè¿‡åˆ é™¤idä¸º1çš„</p>\n\n<p>&nbsp;</p>\n\n<p>userï¼Œä»»åŠ¡è¡¨ä¸­idä¸º1å’Œ2çš„ä¸¤ä¸ªtaskå¯¹è±¡ä¹Ÿä¼šåŒæ—¶åˆ é™¤ã€‚</p>\n\n<p>&nbsp;</p>\n\n<pre>\n<code>from . import db\n\nclass User(db.Model):\n    __tablesname__ = \'users\'\n    \n    id = db.Column(db.Integer, primary_key = True)\n    username = db.Column(db.String(64), unique = True)\n\n    tasks = db.relationship(\'Task\', backref=\'user\', lazy=\'dynamic\', cascade=\'all, delete-orphan\', passive_deletes = True)\n\n    def __repr__(self):\n        return \'&lt;User %r&gt;\' % self.username\n\nclass Task(db.Model):\n    __tablesname__ = \'tasks\'\n    \n    id = db.Column(db.Integer, primary_key = True)\n    taskname = db.Column(db.String(64), unique = True)\n    user_id = db.Column(db.Integer, db.ForeignKey(\'users.id\', ondelete=\'CASCADE\'))\n\n    def __repr__(self):\n        return \'&lt;Task %r&gt;\' % self.taskname</code></pre>\n\n<p>&nbsp;</p>\n\n<h1><strong>æ³¨æ„ï¼š</strong></h1>\n\n<ul>\n	<li>\n	<h2><strong>è‡ªå…³è”çº§è”åˆ é™¤ç›´æ¥åœ¨å¤–é”®è®¾ç½®å¢åŠ ondelete=&#39;CASCADE&#39;</strong></h2>\n	</li>\n	<li>\n	<h2><strong>å¦‚æœå­—æ®µè®¾ç½®äº†relationshipåˆ™æ— æ³•ä½¿ç”¨çº§è”åˆ é™¤</strong></h2>\n\n	<pre>\n\n&nbsp;</pre>\n	</li>\n</ul>\n',0,'http://blog.xiaosankexing.com/FpqBoRmFB_JEEB1nMSaUas8K-v2b',2,0,0);
/*!40000 ALTER TABLE `info_news` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_news_action`
--

DROP TABLE IF EXISTS `info_news_action`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_news_action` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `news_id` int(11) DEFAULT NULL,
  `is_banner` tinyint(1) DEFAULT NULL,
  `is_top` tinyint(1) DEFAULT NULL,
  `is_tuijian` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `news_id` (`news_id`),
  CONSTRAINT `info_news_action_ibfk_1` FOREIGN KEY (`news_id`) REFERENCES `info_news` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_news_action`
--

LOCK TABLES `info_news_action` WRITE;
/*!40000 ALTER TABLE `info_news_action` DISABLE KEYS */;
INSERT INTO `info_news_action` VALUES ('2018-10-03 19:58:58','2018-10-03 19:58:59',6,13,1,1,1),('2018-10-03 21:54:48','2018-10-03 21:54:49',7,15,1,1,1),('2018-10-04 01:36:11','2018-10-04 01:36:15',12,16,1,0,1),('2018-10-09 21:45:43','2018-10-09 21:45:44',13,12,1,0,1);
/*!40000 ALTER TABLE `info_news_action` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `info_user`
--

DROP TABLE IF EXISTS `info_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `info_user` (
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nick_name` varchar(32) NOT NULL,
  `password_hash` varchar(128) NOT NULL,
  `mobile` varchar(11) NOT NULL,
  `avatar_url` varchar(256) DEFAULT NULL,
  `last_login` datetime DEFAULT NULL,
  `is_admin` tinyint(1) DEFAULT NULL,
  `signature` varchar(512) DEFAULT NULL,
  `gender` enum('MAN','WOMAN') DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `mobile` (`mobile`),
  UNIQUE KEY `nick_name` (`nick_name`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `info_user`
--

LOCK TABLES `info_user` WRITE;
/*!40000 ALTER TABLE `info_user` DISABLE KEYS */;
INSERT INTO `info_user` VALUES ('2018-09-25 10:59:23','2018-10-10 02:26:57',1,'admin','pbkdf2:sha256:50000$glpyrhca$4b8b8ec1b2175fe591958c51124e6c8ee77c982540bd3baf85a1e95d08fe8cac','18888888888','http://blog.xiaosankexing.com/FkYTTlB4LR8g0RT2tq_xcpk5aRIy','2018-09-25 10:59:23',1,'æµ‹è¯•è´¦å·','MAN');
/*!40000 ALTER TABLE `info_user` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2018-10-10  2:28:06
